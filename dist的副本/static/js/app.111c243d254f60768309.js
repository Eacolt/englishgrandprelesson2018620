webpackJsonp([1],{"23CB":function(e,t){},DlLW:function(e,t){},"K/gc":function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("7+uW"),i=n("mtWM"),s=n.n(i),o=n("/ocq"),r=n("Rf8U"),u=n.n(r),l=n("Gu7T"),h=n.n(l),c=n("Dd8w"),d=n.n(c),p=n("+Uzz"),g=(n("50uv"),n("7t+N")),m=n.n(g),v=(n("7QTg"),n("NYxO")),f=n("Zrlr"),S=n.n(f),B=n("wxAW"),y=n.n(B),w=function(){function e(){S()(this,e)}return y()(e,null,[{key:"init",value:function(){if(!e.hand){var t=[m()('<img src="static/img/hand1.png" />'),m()('<img src="static/img/hand2.png" />'),m()('<img src="static/img/hand3.png" />'),m()('<img src="static/img/hand4.png" />')];t.forEach(function(e){e.css({position:"absolute",width:"0.9rem",height:"0.9rem",left:"-0.25rem",top:"-0.2rem",display:"block"})}),e.hand=m()("<div></div>"),m()(e.hand).css({position:"absolute",width:".9rem",height:".9rem",zIndex:999999,top:"-6rem",left:"0",visibility:"hidden",pointerEvents:"none",transformOrigin:"center center"}),e.hand.append(t[0]),e.hand.append(t[1]),e.hand.append(t[2]),e.hand.append(t[3]),document.getElementsByTagName("body")[0].appendChild(e.hand.get(0)),document.getElementById("app").addEventListener("mousemove",function(t){e.hand.css({left:t.pageX+"px",top:t.pageY+"px"})})}}},{key:"setStepAnimation",value:function(t){e.locked?e.animateTicker&&clearInterval(e.animateTicker):(Array.prototype.forEach.call(e.hand.children(),function(e){m()(e).css({opacity:0})}),m()(e.hand.children().get(t)).css({opacity:1}))}},{key:"setAnimation",value:function(t){if(e.locked)e.animateTicker&&clearInterval(e.animateTicker);else{switch(t){case"click":e.animateIndex=0,e.animateTicker&&clearInterval(e.animateTicker),e.animateTicker=setInterval(function(){e.animateIndex>=2&&(e.animateIndex=0),Array.prototype.forEach.call(e.hand.children(),function(e){m()(e).css({opacity:0})}),m()(e.hand.children().get(e.animateIndex)).css({opacity:1}),e.animateIndex++},400);break;case"swipe":e.animateIndex=2,e.animateTicker&&clearInterval(e.animateTicker),e.animateTicker=setInterval(function(){e.animateIndex>=4&&(e.animateIndex=2),Array.prototype.forEach.call(e.hand.children(),function(e){m()(e).css({opacity:0})}),m()(e.hand.children().get(e.animateIndex)).css({opacity:1}),e.animateIndex++},400);break;case"normal":e.animateIndex=0,e.animateTicker&&clearInterval(e.animateTicker),Array.prototype.forEach.call(e.hand.children(),function(e){m()(e).css({opacity:0})}),m()(e.hand.children().get(0)).css({opacity:1})}}}}]),e}();w.hand=null,w.locked=!1,w.animateTicker=null,w.animateIndex=0;var k=w;(function(){function e(){S()(this,e)}y()(e,[{key:"resourceById",value:function(){}}])})(),PIXI.utils.TextureCache;((function(){function e(){S()(this,e)}return y()(e,null,[{key:"log",value:function(){var t;e.locked||(t=console.log).call.apply(t,[null].concat(Array.prototype.slice.call(arguments)))}}]),e})()).locked=!1,(function(){function e(){S()(this,e)}return y()(e,null,[{key:"setAudio",value:function(t,n){var a=new Audio(n);e.audios.push({audio:a,name:t})}},{key:"getAudio",value:function(t){for(var n=0;n<e.audios.length;n++)if(e.audios[n].name==t)return e.audios[n].audio}},{key:"getId",value:function(e){return document.getElementById(e)}}]),e}()).audios=[];!function(){function e(t){S()(this,e),this.resList=t}y()(e,[{key:"getSrcById",value:function(e){for(var t=0;t<this.resList.length;t++)if(this.resList[t].id==Number(e))return this.resList[t].src}}])}();var T=function(e,t,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3];var a=this,i=function(e){for(var t=[],n=[],a=0;a<e.length;a++)t.push({name:e[a].name,url:e[a].url});return t.forEach(function(e,t){void 0==PIXI.loader.resources[e.name]&&n.push(e)}),n};a.axios.get("static/"+e+"/gameconfig.json").then(function(e){var t=e.data.assets.map(function(e,t){return{name:""+e.name,url:e.url}});i(t).length<=0?n.call(a,PIXI.loader.resources,e.data):PIXI.loader.add(i(t)).load(function(t,i){n.call(a,i,e.data)})})},C={methods:{beforeEnter:function(e){p.TweenMax.to(e,0,{css:{opacity:0,pointerEvents:"none"}})},enter:function(e,t){p.TweenMax.to(e,.6,{css:{opacity:1,pointerEvents:"auto"}})},leave:function(e,t){p.TweenMax.to(e,.6,{css:{opacity:0,pointerEvents:"none"}})}}},I={computed:{},methods:{setOwnLessonComplete:function(){var e=[];this.$router.options.routes.forEach(function(t,n){if(t.children){var a=t.children.filter(function(e,t){return null!=e.meta.completed});e.push(a)}}),this.SET_LESSONCOMPLETESTAT(e)},updateRestArrangementStat:function(){var e=[];this.$router.options.routes.forEach(function(t,n){t.children&&t.children.filter(function(e,t){return null!=e.meta.completed}).forEach(function(t){0==t.meta.completed&&e.push(t.name)})}),this.SET_RESTARRANGEMENTSTAT(e)}}};function b(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.vueInstance?this.vueInstance:this;if(e){var n=t.$store.state.restArrangementStat;if(n.length>0){t.$router.push({name:n[0]});var a=Number(n[0].split("-")[1]);t.$store.dispatch("SET_LESSONPARTSINDEX",a)}}else{var i=t.$store.state.allLessonComponentsNames,s=(Number(i[0].split("-")[1]),t.lessonCurrentPageIndex);s<i.length-1?t.$router.push({name:i[s+1]}):t.$router.push({name:i[0]})}}var x=function(){function e(){S()(this,e)}return y()(e,null,[{key:"setMaskShow",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.3,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};1==t?TweenMax.to(e.loading.$el,n,{opacity:1,onComplete:function(){a()}}):TweenMax.to(e.loading.$el,n,{opacity:0,onComplete:function(){a()}})}}]),e}();x.loading=null;var P={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"masker"},[t("div",{staticClass:"loadingUI"},[t("img",{attrs:{src:"static/img/loading.gif",width:"100%",height:"auto"}})])])}]};var E=n("VU/8")({name:"masker",mounted:function(){}},P,!1,function(e){n("UkJS")},"data-v-3f19417c",null).exports;n("v2ns");n("88EK"),a.a.use(u.a,s.a);var A=n("O/+C"),M={name:"App",created:function(){document.oncontextmenu=function(){return!1},document.onmousedown=function(e){return 2!=e.which&&(3!=e.which&&void 0)}},mounted:function(){this.SET_CURRENTPAGE(1),k.init(),k.setAnimation("normal"),1==function(){for(var e=navigator.userAgent,t=new Array("Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"),n=!0,a=0;a<t.length;a++)if(e.indexOf(t[a])>0){n=!1;break}return n}()?(this.SET_PLATFORM("pc"),k.hand.css("visibility","visible")):A.mobile&&(this.SET_PLATFORM("mobile"),k.hand.css("visibility","hidden")),document.documentElement.addEventListener("mousedown",function(e){k.hand&&k.setStepAnimation(1)}),document.documentElement.addEventListener("mouseup",function(){k.hand&&k.setStepAnimation(0)})},methods:d()({},Object(v.b)(["SET_CURRENTPAGE","SET_COMPLETEDLESSONNUM","SET_PLATFORM","SET_ENERGY","SET_GAMEHASBEENCOMPLETED"]),{openBook:function(){this.bookShow=!1}}),watch:{allLessonCompleteStat:{handler:function(e,t){var n=[],a=[];e.forEach(function(e){if(e){var t=e.filter(function(e){return 1==e.meta.completed});e.forEach(function(e){a.push(e)}),n.push.apply(n,h()(t))}}),this.SET_ENERGY(n.length/a.length)},deep:!0},energyCurrentNum:function(e){1==e&&this.SET_GAMEHASBEENCOMPLETED(!0),this.SET_COMPLETEDLESSONNUM(e*this.allLessonsNum)}},computed:d()({},Object(v.c)(["gamesArr","allLessonsNum","completedLessonNum","currentPage","bgMaskShow","baseAssetsCompleted","allLessonCompleteStat","energyCurrentNum","gameHasBeenCompleted"]),{routerKey:function(){return void 0!==this.$route.name?this.$route.name+new Date:this.$route+new Date},swiper:function(){return this.$refs.mySwiper.swiper},nextBtnStyle:function(){return{backgroundImage:"url('./static/img/buttonstyle/next1.png')",backgroundRepeat:"no-repeat",backgroundSize:"100% 100%"}},prevBtnStyle:function(){return{backgroundImage:"url('./static/img/buttonstyle/back1.png')",backgroundRepeat:"no-repeat",backgroundSize:"100% 100%"}}}),components:{masker:E}},L={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view",{key:this.routerKey}),this._v(" "),t("masker",{ref:"masker"})],1)},staticRenderFns:[]};var N=n("VU/8")(M,L,!1,function(e){n("DlLW")},null,null).exports,D=n("//Fk"),G=n.n(D),X=n("Zx67"),O=n.n(X),H=n("zwoO"),R=n.n(H),U=n("Pf15"),$=n.n(U),F=function(){function e(t){S()(this,e),this.swiperContainer=t.swiperContainer,this.swiperArea=t.swiperArea,this.swiperDirection=t.swiperDirection||"horizontal",this.swiperIsDown=!1,this.swiperX_arr=[],this.swiperTimes=0,this.swiperTicker=null,this.swiperMovedX=0,this.lock=!1,this.moveToLeft=function(){},this.moveToRight=function(){},this.initial()}return y()(e,[{key:"initial",value:function(){this.swiperContainer.interactive=!0,this.swiperContainer.on("pointerdown",this.swiperCtn_pointerDown,this),this.swiperContainer.on("pointermove",this.swiperCtn_pointerMove,this),this.swiperContainer.on("pointerup",this.swiperCtn_pointerUp,this),this.swiperContainer.on("pointerupoutside",this.swiperCtn_pointerUp,this)}},{key:"removeAllSwiperListener",value:function(){this.moveToLeft=function(){},this.moveToRight=function(){},this.swiperContainer.removeListener("pointerdown",this.swiperCtn_pointerDown,this),this.swiperContainer.removeListener("pointermove",this.swiperCtn_pointerMove,this),this.swiperContainer.removeListener("pointerup",this.swiperCtn_pointerUp,this),this.swiperContainer.removeListener("pointerupoutside",this.swiperCtn_pointerUp,this)}},{key:"setMoveLeftCallBack",value:function(e){this.lock||(this.moveToLeft=e)}},{key:"setMoveRightCallBack",value:function(e){this.lock||(this.moveToRight=e)}},{key:"swiperCtn_pointerDown",value:function(e){this.lock||(0==this.swiperIsDown&&(this.swiperArea?e.data.global.x>this.swiperArea.x&&e.data.global.x<=this.swiperArea.width&&e.data.global.y<this.swiperArea.height&&e.data.global.y>=this.swiperArea.y&&(this.swiperIsDown=!0):this.swiperIsDown=!0),this.swiperTimes=(new Date).getTime())}},{key:"swiperCtn_pointerMove",value:function(e){this.lock||this.swiperIsDown&&this.inMovingDetectSwiperX.call(this,e.data.global.x)}},{key:"swiperCtn_pointerUp",value:function(){if(!this.lock){1==this.swiperIsDown&&(this.swiperIsDown=!1),this.swiperTimes=(new Date).getTime()-this.swiperTimes;var e=this.getCurrentSwiperX();this.swiperTimes<500&&(e>10&&this.moveToRight(),e<-10&&this.moveToLeft(),this.swiperMovedX=0)}}},{key:"inMovingDetectSwiperX",value:function(e){this.lock||"horizontal"==this.swiperDirection&&(this.swiperX_arr.length>3&&(this.swiperX_arr[0]=null,this.swiperX_arr.shift()),this.swiperMovedX=this.swiperX_arr[this.swiperX_arr.length-1]-this.swiperX_arr[0]||0,this.swiperX_arr.push(e))}},{key:"getCurrentSwiperX",value:function(){if(!this.lock){var e=0;return"horizontal"==this.swiperDirection&&(this.swiperX_arr.length>0&&(e=this.swiperX_arr[this.swiperX_arr.length-1]-this.swiperX_arr[0]),this.swiperX_arr=[]),e}}}]),e}(),j=function(){function e(){S()(this,e)}return y()(e,null,[{key:"reset",value:function(){e.mainLoadStat=!1,e.loadedStatus={},e.audios={}}},{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"static/sound/",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"mainload",s=0;createjs.Sound.alternateExtensions=["mp3"],createjs.Sound.on("fileload",function(n){if("completed"==e.loadedStatus[i])return;s>=t.length-1&&(a(),e.loadedStatus[i]="completed");for(var o=0;o<t.length;o++)if(void 0==e.audios[t[o].id]){var r=createjs.Sound.createInstance(t[o].id);e.audios[t[o].id]=r}s++}),createjs.Sound.registerSounds(t,n)}},{key:"addAudio",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"static/sound/",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"subClass",s=0;createjs.Sound.on("fileload",function(n){if("completed"!=e.loadedStatus[i]){s>=t.length-1&&(a(),e.loadedStatus[i]="completed");for(var o=0;o<t.length;o++)if(void 0==e.audios[t[o].id]){var r=createjs.Sound.createInstance(t[o].id);e.audios[t[o].id]=r}s++}}),createjs.Sound.registerSounds(t,n)}}]),e}();j.mainLoadStat=!1,j.audios={},j.loadedStatus={};var q=function(e){function t(){S()(this,t);var e=R()(this,(t.__proto__||O()(t)).call(this));return e.soundTrumpet=null,e.status="stoping",e.resName="",e.alienImages=[],e.on("added",e.addedToStage,e),e}return $()(t,e),y()(t,[{key:"addedToStage",value:function(){for(var e=[],t=0;t<this.alienImages.length;t++){var n=PIXI.loader.resources[this.resName].textures[this.alienImages[t]];e.push(n)}this.soundTrumpet=new PIXI.extras.AnimatedSprite(e),this.soundTrumpet.animationSpeed=.08,this.stop(),this.addChild(this.soundTrumpet)}},{key:"play",value:function(){this.soundTrumpet.play(),this.status="playing"}},{key:"stop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;this.status="stoping",this.soundTrumpet.gotoAndStop(e)}},{key:"speed",set:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.soundTrumpet.animationSpeed=e}}]),t}(PIXI.Container),z=function(){function e(t){S()(this,e),this.textureArr=[],this.speed=1,this.yoyo=!1,this.mc=null,this.currentFrames=0,this.framesArr=[],this.yoyoTweenMax=null;var n=PIXI.loader.resources[t].textures;for(var a in n)this.textureArr.push(n[a])}return y()(e,[{key:"create",value:function(){return this.mc=new PIXI.extras.AnimatedSprite(this.textureArr),this.mc.animationSpeed=this.speed,this.mc}},{key:"yoyoTween",value:function(){if(this.yoyoTweenMax)return this.yoyoTweenMax}},{key:"playYoyo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this;this.yoyoTweenMax=TweenMax.to(n,t,{currentFrames:e,yoyo:!0,repeat:2,onUpdate:function(){n.mc.gotoAndStop(Math.floor(n.currentFrames))}})}}]),e}(),W=(function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;S()(this,e),this.currentTimes=0,this.times=n,this.repeatTimes=a,this.timeTicker=null,this.timeTickerFun=null,this.callBack=t,this.isStart=!0}y()(e,[{key:"start",value:function(){var e=this,t=this;this.timeTicker&&(clearTimeout(this.timeTicker),this.timeTicker=null),this.timeTickerFun&&(this.timeTickerFun=null),this.isStart=!0,this.currentTimes=0,this.timeTickerFun=function(){e.timeTicker=setTimeout(function(){t.isStart||t.currentTimes<$repeatTimes&&t.currentTimes>-1&&t.timeTickerFun()},t.times),t.callBack(),t.currentTimes+=1}}},{key:"pause",value:function(){this.isStart=!1}},{key:"resume",value:function(){this.isStart=!0}},{key:"destroy",value:function(){this.timeTicker&&(clearTimeout(this.timeTicker),this.timeTicker=null),this.timeTickerFun&&(this.timeTickerFun=null),this.currentTimes=0,this.isStart=null}}])}(),function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};S()(this,t);var n=R()(this,(t.__proto__||O()(t)).call(this));return n.resources=PIXI.loader.resources,n.vueInstance=e.vueInstance,n.bookAn=null,n.openBookAnimating=!1,n.closeBookAnimating=!1,n.menuCloseBtn=null,n.boxes=[],n.energyCan=null,n.energyCanCtn1=null,n.energyCanCtn2=null,n.treasureBoxUI=null,n.leftBtn=null,n.rightBtn=null,n.currentPage=0,n.page1StartBtn=null,n.page2StartBtn=null,n.page3StartBtn=null,n.currentBookPage=0,n.backGroundMask=null,n.on("added",n.initial,n),n}return $()(t,e),y()(t,[{key:"getSlotRegionByName",value:function(e,t){for(var n=0;n<e.slotContainers.length;n++)for(var a=0;a<e.slotContainers[n].children.length;a++)if(e.slotContainers[n].children[a].region.name==t)return e.slotContainers[n]}},{key:"getCardPromise",value:function(e){var t=this,n=new G.a(function(t,n){t(e)});n.then(function(e){if(0!=e){var n=e%4==0?4:e%4;switch(e%4==0?Math.floor(e/4)-1:Math.floor(e/4)){case 0:var a=t.bookAn.skeleton.findSlot("page_imgs1"),i=t.bookAn.skeleton.getAttachment(a.data.index,"page_imgs1-"+n);a.setAttachment(i);break;case 1:var s=t.bookAn.skeleton.findSlot("page_imgs1"),o=t.bookAn.skeleton.getAttachment(s.data.index,"page_imgs1-4");s.setAttachment(o);var r=t.bookAn.skeleton.findSlot("page_imgs2"),u=t.bookAn.skeleton.getAttachment(r.data.index,"page_imgs2-"+n);r.setAttachment(u);break;case 2:var l=t.bookAn.skeleton.findSlot("page_imgs1"),h=t.bookAn.skeleton.getAttachment(l.data.index,"page_imgs1-4");l.setAttachment(h);var c=t.bookAn.skeleton.findSlot("page_imgs2"),d=t.bookAn.skeleton.getAttachment(c.data.index,"page_imgs2-4");c.setAttachment(d);var p=t.bookAn.skeleton.findSlot("imgs_back"),g=t.bookAn.skeleton.getAttachment(p.data.index,"imgs_back-"+n);p.setAttachment(g)}}})}},{key:"showBlackMask",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.3;this.backGroundMask&&(this.backGroundMask.interactive=!0,TweenMax.to(this.backGroundMask,e,{alpha:.8}))}},{key:"hideBlackMask",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.3,t=this;this.backGroundMask&&TweenMax.to(this.backGroundMask,e,{alpha:0,onComplete:function(){t.backGroundMask.interactive=!1}})}},{key:"initial",value:function(){var e=this;e.backGroundMask=new PIXI.Graphics,e.backGroundMask.beginFill(0),e.backGroundMask.drawRect(0,0,1920,1080),e.backGroundMask.endFill(),e.backGroundMask.interactive=!1,e.addChild(e.backGroundMask),e.backGroundMask.alpha=0,this.energyCanCtn2&&(this.energyCanCtn2.alpha=0),this.energyCanCtn1&&(this.energyCanCtn1.alpha=0),e.menuCloseBtn=new PIXI.Sprite(PIXI.Texture.from("menubtnClose_png")),e.menuCloseBtn.interactive=!1,e.menuCloseBtn.pivot.x=e.menuCloseBtn.width,e.menuCloseBtn.pivot.y=0,e.addChild(e.menuCloseBtn),e.menuCloseBtn.alpha=0;var t=e.resources.energyAnime_skeleton.spineData;e.energyCan=new PIXI.spine.Spine(t),this.addChild(e.energyCan),e.energyCan.alpha=0,e.energyCan.x=960,e.energyCan.y=490;var n=new PIXI.Sprite(e.resources.congracard_png.texture),a=new PIXI.Sprite(e.resources.texttable_png.texture);e.treasureBoxUI=new PIXI.Container,e.treasureBoxUI.addChild(a),e.treasureBoxUI.addChild(n),a.scale.x=a.scale.y=.7,n.scale.x=n.scale.y=.7,a.y=-220,a.x=20,n.y=140,n.x=30,e.addChild(e.treasureBoxUI),e.treasureBoxUI.x=710,e.treasureBoxUI.y=500,e.treasureBoxUI.alpha=0;for(var i=e.resources.boxAnime_skeleton.spineData,s=0;s<3;s++)this.boxes.push(new PIXI.spine.Spine(i)),this.boxes[s].alpha=0,this.boxes[s].x=400+s*this.boxes[0].width/1.2,this.boxes[s].y=540,this.addChild(this.boxes[s]),this.boxes[s].interactive=!1,this.boxes[s].on("pointertap",e.boxPointerDown_handler.bind(e,s),e);var o=e.resources.bookAnime_skeleton.spineData;this.bookAn=new PIXI.spine.Spine(o),this.addChild(this.bookAn),this.bookAn.x=920,this.bookAn.y=600,this.bookAn.alpha=0,this.page1StartBtn=new PIXI.Graphics,this.page1StartBtn.beginFill(16711680,0),this.page1StartBtn.drawRect(0,0,240,80),this.page1StartBtn.endFill(),this.page1StartBtn.x=150,this.page1StartBtn.y=75,this.page2StartBtn=new PIXI.Graphics,this.page2StartBtn.beginFill(16711680,0),this.page2StartBtn.drawRect(0,0,240,80),this.page2StartBtn.endFill(),this.page2StartBtn.x=-390,this.page2StartBtn.y=80;var r=new PIXI.Graphics;r.beginFill(16711680,.1),r.drawRect(0,0,120,120),r.endFill(),r.x=1710,r.y=20,e.rightBtn=new PIXI.Graphics,e.rightBtn.beginFill(16711680,.2),e.rightBtn.drawRect(10,-320,560,620),e.rightBtn.endFill(),e.leftBtn=e.rightBtn.clone(),e.leftBtn.x=-590,this.bookAn.addChild(e.rightBtn),this.bookAn.addChild(e.leftBtn),this.bookAn.addChild(this.page1StartBtn),this.bookAn.addChild(this.page2StartBtn),this.page1StartBtn.interactive=this.page2StartBtn.interactive=!1,this.page1StartBtn.on("pointerdown",this.page1StartBtn_tapHandler,this),this.page2StartBtn.on("pointerdown",this.page2StartBtn_tapHandler,this),e.rightBtn.on("pointerdown",function(){if(e.currentPage>=1)e.currentPage=1;else{var t=e.bookAn.state.setAnimation(0,"turnnext",!1);e.currentPage++,j.audios.book_turn.play(),e.page1StartBtn.interactive=e.page2StartBtn.interactive=!1,e.rightBtn.interactive=e.leftBtn.interactive=!1,0==e.currentPage?(e.page2StartBtn.alpha=0,e.page1StartBtn.alpha=1):1==e.currentPage&&(e.page2StartBtn.alpha=1,e.page1StartBtn.alpha=1),t.listener={complete:function(){e.page1StartBtn.interactive=e.page2StartBtn.interactive=!0,e.rightBtn.interactive=e.leftBtn.interactive=!0,e.bookAn.state.setAnimation(0,"stay2",!0)}}}}),e.leftBtn.on("pointerdown",function(){if(e.currentPage<=0)e.currentPage=0;else{j.audios.book_turn.play(),e.page1StartBtn.interactive=e.page2StartBtn.interactive=!1;var t=e.bookAn.state.setAnimation(0,"turnback",!1);e.currentPage--,e.rightBtn.interactive=e.leftBtn.interactive=!1,0==e.currentPage?(e.page2StartBtn.alpha=0,e.page1StartBtn.alpha=1):1==e.currentPage&&(e.page2StartBtn.alpha=1,e.page1StartBtn.alpha=0),t.listener={complete:function(){e.page2StartBtn.interactive=!1,e.page1StartBtn.interactive=!0,e.rightBtn.interactive=e.leftBtn.interactive=!0,e.bookAn.state.setAnimation(0,"stay1",!0)}}}}),e.leftBtn.interactive=!1,e.rightBtn.interactive=!1,e.leftBtn.alpha=e.rightBtn.alpha=0,e.menuCloseBtn.alpha=0,e.menuCloseBtn.interactive=!1,e.menuCloseBtn.pivot.x=e.menuCloseBtn.width,e.menuCloseBtn.pivot.y=0,e.menuCloseBtn.x=1830,e.menuCloseBtn.y=35}},{key:"page1StartBtn_tapHandler",value:function(){0==this.currentPage&&this.vueInstance.allGameCards>=4?(window.parent.postMessage({type:"enterGame",game:1},"*"),console.log("找你妹游戏开启")):1==this.currentPage&&this.vueInstance.allGameCards>=12&&(window.parent.postMessage({type:"enterGame",game:3},"*"),console.log("跑酷游戏开启"))}},{key:"page2StartBtn_tapHandler",value:function(){1==this.currentPage&&this.vueInstance.allGameCards>=8&&(window.parent.postMessage({type:"enterGame",game:2},"*"),console.log("换装游戏开启"))}},{key:"boxPointerDown_handler",value:function(e,t){var n=this,a=e,i=t.currentTarget;i.interactive=!1,i.removeAllListeners(),n.boxes.forEach(function(e){e.interactive=!1});var s=!0;new G.a(function(e,t){window.parent.postMessage({type:"stepSubmit",page:n.vueInstance.lessonCurrentPageIndex},"*"),window.parent.postMessage({type:"taskSubmit"},"*"),window.addEventListener("message",function(t){"getCard"===t.data.type?e(Number(t.data.getCard)):s&&(e(1),s=!1)})}).then(function(e){1==e?(n.vueInstance.SET_ALREADYHASONECARD(!0),n.vueInstance.SET_GAMECARDS(n.vueInstance.allGameCards+1),TweenMax.to(i,1,{x:n.boxes[1].x,onStart:function(){n.boxes.forEach(function(e,t){t!=a&&TweenMax.to(e,1,{alpha:0})}),new Audio("static/sound/box_right.mp3").play()},onComplete:function(){i.state.setAnimation(0,"open1",!1),setTimeout(function(){TweenMax.to(n.treasureBoxUI,1,{alpha:1}),setTimeout(function(){var e=null;e="/index"==K.vueInstance.$route.fullPath,K.vueInstance.$router.push("/index"),TweenMax.to(n.treasureBoxUI,.5,{alpha:0}),TweenMax.to(i,.5,{alpha:0}),e?n.openBook():K.vueInstance.SET_SHOWMAGICBOOK(!0),n.parent.parent.swiperHammer&&(n.parent.parent.swiperHammer.lock=!0)},1e3)},1400)}})):0==e&&TweenMax.to(i,1,{alpha:1,onStart:function(){n.boxes.forEach(function(e,t){t!=a&&TweenMax.to(e,1,{alpha:0})}),new Audio("static/sound/box_wrong.mp3").play()},onComplete:function(){i.state.setAnimation(0,"open2",!1),setTimeout(function(){TweenMax.to(i,.5,{alpha:0}),setTimeout(function(){n.vueInstance.$router.push("/index"),n.hideBlackMask(),n.parent.parent.swiperHammer&&(n.parent.parent.swiperHammer.lock=!0)},1e3)},1400)}})})}},{key:"closeBtnHandler",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=this;if(0==this.closeBookAnimating){if(this.closeBookAnimating=!0,j.audios.bgSound.play(),this.leftBtn.interactive=this.rightBtn.interactive=!1,0==this.currentPage)this.bookAn.state.setAnimation(0,"close1",!1).listener={complete:function(){t.closeBookAnimating=!1,e(),t.hideBlackMask(),t.backGroundMask.interactive=!1,t.parent.parent.swiperHammer&&(t.parent.parent.swiperHammer.lock=!1)}};else t.bookAn.state.setAnimation(0,"close2",!1).listener={complete:function(){t.closeBookAnimating=!1,e(),t.hideBlackMask(),t.backGroundMask.interactive=!1,t.parent.parent.swiperHammer&&(t.parent.parent.swiperHammer.lock=!1)}};this.currentPage=0,j.audios.book_close.play()}}},{key:"openBook",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=this;if(this.bookAn&&0==this.openBookAnimating){t.showBlackMask(),t.backGroundMask.interactive=!0,this.openBookAnimating=!0,this.bookAn.alpha=1,this.boxes.forEach(function(e){e.alpha=0}),t.getCardPromise.call(t,t.vueInstance.allGameCards),t.page2StartBtn.interactive=t.page1StartBtn.interactive=!1;var n=this.bookAn.state.setAnimation(0,"open",!1);0==t.currentPage&&(t.page2StartBtn.alpha=0,t.page1StartBtn.alpha=1,t.page2StartBtn.interactive=!1),n.listener={complete:function(){t.page1StartBtn.interactive=!0,t.bookAn.state.setAnimation(0,"stay1",!0),t.menuCloseBtn.alpha=1,t.menuCloseBtn.interactive=!0,t.menuCloseBtn.on("pointertap",t.menuCloseBtn_tapHandler,t)}},j.audios.book_open.play()}setTimeout(function(){t.leftBtn.interactive=t.rightBtn.interactive=!0,e(),t.openBookAnimating=!1},1500)}},{key:"menuCloseBtn_tapHandler",value:function(e){var t=this;t.menuCloseBtn.alpha=0,t.menuCloseBtn.interactive=!1,t.closeBtnHandler(function(){t.menuCloseBtn.removeListener("pointertap",t.menuCloseBtn_tapHandler,t),t.parent.parent.swiperHammer&&(t.parent.parent.swiperHammer.lock=!0)})}},{key:"openBoxes",value:function(){this.boxes.length>0&&(this.bookAn.alpha=0,this.boxes.forEach(function(e){e.alpha=1,e.state.setAnimation(0,"jump",!0)}))}},{key:"openEnergyCan",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this;this.bookAn.alpha=0,this.boxes.forEach(function(e){e.alpha=0}),t.parent.parent.swiperHammer&&(t.parent.parent.swiperHammer.lock=!0),t.showBlackMask(),this.energyCan.alpha=1;var n=K.vueInstance.$parent.completedLessonNum/K.vueInstance.$parent.allLessonsNum*3.5,a=this.energyCan.state.setAnimation(0,"power",!1),i=new PIXI.ticker.Ticker;t.energyCan.state.tracks[0].timeScale=1,i.add(function(){a.trackTime>=n&&(!function(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0]){t.energyCanCtn2=new PIXI.Container;var e=new PIXI.Sprite(t.resources.text2_info.texture);e.pivot.x=e.width/2,e.y=660,e.x=960;var n=new PIXI.Sprite(t.resources.open_btn.texture);n.pivot.x=n.width/2,n.x=960,n.y=800,t.energyCanCtn2.addChild(n),n.interactive=!0,n.on("pointerdown",t.openBox_pointerDown_handler,t),t.energyCanCtn2.addChild(e),t.addChild(t.energyCanCtn2)}else{t.energyCanCtn1=new PIXI.Container;var a=new PIXI.Sprite(t.resources.text1_info.texture);a.pivot.x=a.width/2,a.y=660,a.x=960;var i=new PIXI.Sprite(t.resources.continue_btn.texture);i.pivot.x=i.width/2,i.x=1160,i.y=800,t.energyCanCtn1.addChild(i);var s=new PIXI.Sprite(t.resources.gohome_btn.texture);s.pivot.x=s.width/2,s.x=760,s.y=800,t.energyCanCtn1.addChild(s),i.interactive=s.interactive=!1,i.on("pointerdown",t.continueBtn_pointerDown_handler,t),s.on("pointerdown",t.goHomeBtn_pointerDown_handler,t),t.energyCanCtn1.addChild(a),t.addChild(t.energyCanCtn1),t.energyCanCtn1.alpha=0,TweenMax.to(t.energyCanCtn1,1,{alpha:1,onComplete:function(){i.interactive=s.interactive=!0}})}}(e),i.stop(),i.destroy(),t.energyCan.state.tracks[0].timeScale=0)}),new Audio("static/sound/power_over.mp3").play(),i.start(),e&&K.vueInstance.SET_GAMEHASBEENCOMPLETED(!0)}},{key:"hideAll_EnergyElement",value:function(){this.energyCan.alpha=0,this.energyCanCtn1&&(this.energyCanCtn1.alpha=0),this.energyCanCtn2&&(this.energyCanCtn2.alpha=0)}},{key:"openBox_pointerDown_handler",value:function(){this.hideAll_EnergyElement(),this.openBoxes(),this.boxes.forEach(function(e){e.interactive=!0})}},{key:"continueBtn_pointerDown_handler",value:function(){b.call(this.vueInstance),this.hideAll_EnergyElement()}},{key:"goHomeBtn_pointerDown_handler",value:function(){this.vueInstance.$router.push("/index/"),this.hideAll_EnergyElement()}}]),t}(PIXI.Container)),Y=function(e){function t(){S()(this,t);var e=R()(this,(t.__proto__||O()(t)).call(this));return e.barCtn=null,e.bookScene=null,e.offsetToTop=35,e.offsetToLeft=90,e.energyBar=null,e.backBtn=null,e.energyMask=null,e.bookBtn=null,e.closeBtn=null,e.soundBtn=null,e.homeBtn=null,e.energyNumber=0,e.buttonsOffset=40,e._backBtnShow=!1,e._homeBtnShow=!1,e._energyBtnShow=!1,e._bookBtnShow=!1,e._closeBtnShow=!1,e._soundBtnShow=!1,e.rightMenuUI=[],e.starsLight=null,e.closeBtnHandler=null,e.bookBtnHandler=null,e.soundBtnHandler=null,e.backBtnHandler=null,e.homeBtnHandler=null,e.gobackHandler=function(){},e.on("added",e.initial,e),e}return $()(t,e),y()(t,[{key:"setGoBackHandler",value:function(e){this.gobackHandler=e}},{key:"createSprite",value:function(e){return new PIXI.Sprite(PIXI.loader.resources[e].texture)}},{key:"createTextureAtlas",value:function(e){return new PIXI.Sprite(PIXI.loader.resources.allmenuassets_altas.textures[e])}},{key:"initial",value:function(){this.starsLight=new PIXI.spine.Spine(PIXI.loader.resources.starflash_json.spineData),this.starsLight.state.setAnimation(0,"star",!0),this.barCtn=new PIXI.Container,function(){this.backBtn=this.createSprite("menubtnBack_png"),this.backBtn.pivot.x=0,this.backBtn.pivot.y=0,this.barCtn.addChild(this.backBtn)}.call(this),function(){this.energyBar=new PIXI.Container;var e,t,n=null,a=null;n=this.createSprite("menubtnKey_png"),e=this.createSprite("menuBtnKeyline_png"),t=this.createSprite("menuBtnKeylight_png"),a=this.createSprite("menuBtn_Energy"),n.y=11,n.x=11,this.energyMask=new PIXI.Graphics,this.energyMask.beginFill(16711680),this.energyMask.drawRoundedRect(0,39,1,40,0),this.energyMask.endFill(),this.energyBar.addChild(this.energyMask),this.energyBar.addChild(n),this.energyBar.addChild(a),this.energyBar.addChild(e),this.energyBar.addChild(t),a.mask=this.energyMask,this.barCtn.addChild(this.energyBar),this.energyBar.pivot.x=this.energyBar.width,this.energyBar.pivot.y=0}.call(this),function(){this.bookBtn=this.createSprite("menubtnBook_png"),this.barCtn.addChild(this.bookBtn),this.bookBtn.pivot.x=this.bookBtn.width,this.bookBtn.pivot.y=0}.call(this),function(){this.soundBtn=new q,this.soundBtn.resName="menubtnSound_atlas",this.soundBtn.alienImages=["sound0.png","sound1.png","sound2.png"],this.barCtn.addChild(this.soundBtn),this.soundBtn.pivot.x=this.soundBtn.width,this.soundBtn.pivot.y=0}.call(this),function(){this.closeBtn=this.createSprite("menubtnClose_png"),this.barCtn.addChild(this.closeBtn),this.closeBtn.pivot.x=this.closeBtn.width,this.closeBtn.pivot.y=0}.call(this),function(){this.homeBtn=this.createSprite("menubtnHome_png"),this.homeBtn.pivot.x=0,this.homeBtn.pivot.y=0,this.barCtn.addChild(this.homeBtn)}.call(this),this.setBackPos.call(this,this.offsetToLeft),this.setBookPos.call(this,1920-this.offsetToLeft),this.setEnergyBarPos.call(this,Number(1920-this.offsetToLeft-this.bookBtn.width-this.buttonsOffset)),this.setSoundPos.call(this,1920-this.offsetToLeft),this.setClosePos.call(this,1920-this.offsetToLeft),this.setHomePos.call(this,this.offsetToLeft),this.addChild(this.barCtn),this.backBtn.on("pointerdown",this.gobackHandler),this.backBtnShow=!0,this.homeBtnShow=!1,this.energyBtnShow=!0,this.bookBtnShow=!0,this.updateGameMenu(),this.bookScene=new W({vueInstance:t.vueInstance}),this.addChild(this.bookScene),this.addChild(this.starsLight),this.starsLight.pivot.y=0,this.starsLight.pivot.x=this.starsLight.width,this.starsLight.y=100,this.starsLight.x=1400,this.starsLight.alpha=0}},{key:"setBookPos",value:function(e){this.bookBtn.x=e,this.bookBtn.y=this.offsetToTop}},{key:"setEnergyBarPos",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1800;this.energyBar.x=e,this.energyBar.y=this.offsetToTop}},{key:"setBackPos",value:function(e){this.backBtn.x=e,this.backBtn.y=this.offsetToTop}},{key:"setHomePos",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.homeBtn.x=e,this.homeBtn.y=this.offsetToTop}},{key:"setClosePos",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.closeBtn.x=e,this.closeBtn.y=this.offsetToTop}},{key:"setSoundPos",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.soundBtn.x=e,this.soundBtn.y=this.offsetToTop}},{key:"setBookPos",value:function(e){this.bookBtn.x=e,this.bookBtn.y=this.offsetToTop}},{key:"updateGameMenu",value:function(){-1==this.rightMenuUI.indexOf("backBtn")&&-1!=this.rightMenuUI.indexOf("homeBtn")?(this.backBtn.interactive=!1,this.homeBtn.interactive=!0,this.backBtn.alpha=0,this.homeBtn.alpha=1,this.setBackPos.call(this,this.offsetToLeft+40+this.backBtn.width),this.setHomePos.call(this,this.offsetToLeft)):-1!=this.rightMenuUI.indexOf("backBtn")&&-1==this.rightMenuUI.indexOf("homeBtn")?(this.backBtn.interactive=!0,this.homeBtn.interactive=!1,this.backBtn.alpha=1,this.homeBtn.alpha=0,this.setHomePos.call(this,this.offsetToLeft+40+this.backBtn.width),this.setBackPos.call(this,this.offsetToLeft)):-1!=this.rightMenuUI.indexOf("backBtn")&&-1!=this.rightMenuUI.indexOf("homeBtn")?(this.backBtn.interactive=this.homeBtn.interactive=!0,this.backBtn.alpha=this.homeBtn.alpha=1,this.setBackPos.call(this,this.offsetToLeft+40+this.backBtn.width),this.setHomePos.call(this,this.offsetToLeft)):-1==this.rightMenuUI.indexOf("backBtn")&&-1==this.rightMenuUI.indexOf("homeBtn")&&(this.backBtn.interactive=this.homeBtn.interactive=!1,this.backBtn.alpha=this.homeBtn.alpha=0,this.setBackPos.call(this,this.offsetToLeft+40+this.backBtn.width),this.setHomePos.call(this,this.offsetToLeft)),this.rightMenuUI.filter(function(e){return"backBtn"!=e&&"homeBtn"!=e}).length>1?this.setEnergyBarPos.call(this,Number(1920-this.offsetToLeft-this.bookBtn.width-this.buttonsOffset)):this.setEnergyBarPos.call(this,Number(1920-this.offsetToLeft)),-1!=this.rightMenuUI.indexOf("soundBtn")?(this.soundBtn.interactive=!0,this.bookBtn.interactive=!1,this.closeBtn.interactive=!1,this.soundBtn.alpha=1,this.bookBtn.alpha=0,this.closeBtn.alpha=0,this.setSoundPos.call(this,1920-this.offsetToLeft)):-1!=this.rightMenuUI.indexOf("bookBtn")?(this.soundBtn.interactive=!1,this.bookBtn.interactive=!0,this.closeBtn.interactive=!1,this.soundBtn.alpha=0,this.bookBtn.alpha=1,this.closeBtn.alpha=0,this.setBookPos.call(this,1920-this.offsetToLeft)):-1!=this.rightMenuUI.indexOf("closeBtn")?(this.soundBtn.interactive=!1,this.bookBtn.interactive=!1,this.closeBtn.interactive=!0,this.soundBtn.alpha=0,this.bookBtn.alpha=0,this.closeBtn.alpha=1,this.setClosePos.call(this,1920-this.offsetToLeft)):(this.soundBtn.interactive=!1,this.bookBtn.interactive=!1,this.closeBtn.interactive=!1,this.soundBtn.alpha=0,this.bookBtn.alpha=0,this.closeBtn.alpha=0)}},{key:"playStars",value:function(){this.starsLight.state.setAnimation(0,"star",!1),this.starsLight.state.tracks[0].trackTime=0,this.starsLight.alpha=1,j.audios.power_gain.play()}},{key:"foldUp",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.3;p.TweenMax.to(this.barCtn,e,{y:-300})}},{key:"foldDown",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.3;p.TweenMax.to(this.barCtn,e,{y:0})}},{key:"clearGameMenuEvents",value:function(){this.closeBtnHandler&&(this.closeBtn.removeListener("pointertap",this.closeBtnHandler,this),this.closeBtnHandler=null),this.backBtnHandler&&(this.backBtn.removeListener("pointertap",this.backBtnHandler,this),this.backBtnHandler=null),this.homeBtnHandler&&(this.homeBtn.removeListener("pointertap",this.homeBtnHandler,this),this.homeBtnHandler=null),this.soundBtnHandler&&(this.soundBtn.removeListener("pointertap",this.soundBtnHandler,this),this.soundBtnHandler=null),this.bookBtnHandler&&(this.bookBtn.removeListener("pointertap",this.bookBtnHandler,this),this.bookBtnHandler=null)}},{key:"setCloseBtn_tapHandler",value:function(e){this.closeBtnHandler=e,this.closeBtn.on("pointertap",this.closeBtnHandler,this)}},{key:"setSoundBtn_tapHandler",value:function(e){this.soundBtnHandler=e,this.soundBtn.on("pointertap",this.soundBtnHandler,this)}},{key:"setBookBtn_tapHandler",value:function(e){this.bookBtnHandler=e,this.bookBtn.on("pointertap",this.bookBtnHandler,this)}},{key:"setBackBtn_tapHandler",value:function(e){this.backBtnHandler=e,this.backBtn.on("pointertap",this.backBtnHandler,this)}},{key:"setHomeBtn_tapHandler",value:function(e){this.homeBtnHandler=e,this.homeBtn.on("pointertap",this.homeBtnHandler,this)}},{key:"energy",set:function(e){p.TweenMax.to(this.energyMask,1,{width:286*e}),this.energyNumber=e},get:function(){return this.energyNumber}},{key:"energyOnce",set:function(e){this.energyMask.width=286*e,this.energyNumber=e}},{key:"backBtnShow",set:function(e){this._backBtnShow=e;var t=this.rightMenuUI.indexOf("backBtn");e?-1==t&&this.rightMenuUI.push("backBtn"):-1!=t&&this.rightMenuUI.splice(t,1)},get:function(){return this._backBtnShow}},{key:"homeBtnShow",set:function(e){this._homeBtnShow=e;var t=this.rightMenuUI.indexOf("homeBtn");e?-1==t&&this.rightMenuUI.push("homeBtn"):-1!=t&&this.rightMenuUI.splice(t,1)},get:function(){return this._homeBtnShow}},{key:"energyBtnShow",set:function(e){this._energyBtnShow=e;var t=this.rightMenuUI.indexOf("engerBtn");e?-1==t&&this.rightMenuUI.push("engerBtn"):-1!=t&&this.rightMenuUI.splice(t,1)},get:function(){return this._energyBtnShow}},{key:"bookBtnShow",set:function(e){this._bookBtnShow=e;var t=this.rightMenuUI.indexOf("bookBtn");e?-1==t&&this.rightMenuUI.push("bookBtn"):-1!=t&&this.rightMenuUI.splice(t,1)},get:function(){return this._bookBtnShow}},{key:"soundBtnShow",set:function(e){this._soundBtnShow=e;var t=this.rightMenuUI.indexOf("soundBtn");e?-1==t&&this.rightMenuUI.push("soundBtn"):-1!=t&&this.rightMenuUI.splice(t,1)}},{key:"closeBtnShow",set:function(e){this._closeBtnShow=e;var t=this.rightMenuUI.indexOf("closeBtn");e?-1==t&&this.rightMenuUI.push("closeBtn"):-1!=t&&this.rightMenuUI.splice(t,1)},get:function(){return this._closeBtnShow}}]),t}(PIXI.Container);Y.instancement=null,Y.vueInstance=null,Y.freeze=!1;var K=Y,V=function(e){function t(e){S()(this,t);var n=R()(this,(t.__proto__||O()(t)).call(this));return n.gameConfig=e.json,n.resource=PIXI.loader.resources,n.vueInstance=e.vueInstance,n.gameMenuBar=null,n.gameLevel=0,n.bearDefaultAn=null,n.swiperContainer=null,n.swiperPosition=-1,n.leftTouchBtn=null,n.rightTouchBtn=null,n.swiperHammer=null,n.swiperAnimating=!1,n.ufoSlides=[],n.THEME_TYPE=null,n.on("added",n.addedToStage,n),n}return $()(t,e),y()(t,[{key:"showMonsters",value:function(){for(var e=0;e<this.ufoSlides.length;e++)this.ufoSlides[e].alpha=1}},{key:"showFocusAnimation",value:function(e,t){this.ufoSlides.length>0&&(this.ufoSlides.forEach(function(e,t){e.getChildAt(1).state.setAnimation(0,"standing",!0)}),this.ufoSlides[e].getChildAt(1).state.setAnimation(0,"ready",!1),this.ufoSlides[e].getChildAt(1).state.addAnimation(0,"working",!0,0).listener={complete:function(){t()}})}},{key:"updateFromVue",value:function(e){e&&this.ufoSlides.forEach(function(t,n){t.x=e[n]})}},{key:"clickonme",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};this.ufoSlides[e].getChildAt(1).state.setAnimation(0,"catching1",!1),this.ufoSlides[e].getChildAt(1).state.addListener({complete:function(e){"catching1"==e.animation.name&&t&&t()}}),K.freeze=!0}},{key:"createCommonAtlas",value:function(e){return new PIXI.Sprite(PIXI.loader.resources.commons_atlas.textures[e])}},{key:"destroyed",value:function(){this.gameMenuBar.clearGameMenuEvents(),this.gameMenuBar.destroy(),this.gameMenuBar=null,this.ufoSlides=null}},{key:"addedToStage",value:function(){var e=this,t=this;this.THEME_TYPE=t.vueInstance.gameThemeType,this.rightTouchBtn=new PIXI.Graphics,this.rightTouchBtn.beginFill(16711680),this.rightTouchBtn.drawRect(0,0,500,700),this.rightTouchBtn.endFill(),this.leftTouchBtn=new PIXI.Graphics,this.leftTouchBtn.beginFill(16711680),this.leftTouchBtn.drawRect(0,0,500,700),this.leftTouchBtn.endFill(),this.swiperContainer=new PIXI.Container;var n=new PIXI.Sprite(t.resource.bgGround_jpg.texture),a=new PIXI.Sprite(t.resource.indexback1_jpg.texture),i=t.resource.boyskeleton.spineData,s=new PIXI.spine.Spine(i);switch(s.skeleton.setSkinByName("boy1"),s.skeleton.setSlotsToSetupPose(),s.state.setAnimation(0,"hello1",!0),s.x=1260,s.y=680,s.scale.x=s.scale.y=.36,this.THEME_TYPE){case 1:s.tint=16760516;break;case 2:s.tint=16767136;break;case 3:s.tint=14417796;break;case 5:s.tint=15189247}t.addChild(n),t.addChild(s),t.addChild(a);for(var o=function(n){var a=new PIXI.Container;switch(a.myIndex=n,e.vueInstance.$store.state.lessonPartsList[n].name){case"song":u=t.resource.indexMonster1_json.spineData;break;case"vocabulary":u=t.resource.indexMonster2_json.spineData;break;case"sentences":u=t.resource.indexMonster3_json.spineData;break;case"story":case"reading":u=t.resource.indexMonster4_json.spineData;break;case"grammar":u=t.resource.indexMonster5_json.spineData;break;case"text":u=t.resource.indexMonster6_json.spineData;break;case"ketpet":u=t.resource.indexMonster7_json.spineData}var i=new PIXI.spine.Spine(u);i.state.setAnimation(0,"standing",!0),i.x=308,i.y=-10,l=new PIXI.Sprite(t.resource.tablebar2_png.texture),h=new PIXI.Sprite(t.resource.table_png.texture),c=new PIXI.Sprite(t.resource.tablebar_png.texture),a.addChild(h),h.y=160,h.x=12,a.addChild(i);var s,o=new PIXI.Container,r=new PIXI.Graphics;r.beginFill(16711680),r.drawRect(0,0,h.width,40),r.endFill(),o.addChild(c),o.addChild(l),o.addChild(r),l.mask=r,o.pivot.x=o.width/2,o.pivot.y=o.height/2,o.x=h.width/2+20,o.y=388,r.width=(s=[],t.vueInstance.allLessonCompleteStat[n].forEach(function(e){s.push(Number(e.meta.completed))}),s.reduce(function(e,t){return e+t})/t.vueInstance.allLessonCompleteStat[n].length*l.width),a.addChild(o),(d=new PIXI.Sprite(t.resource.tabletext_atlas.textures[t.vueInstance.allPartNames[n]+".png"])).pivot.x=d.width/2,d.x=h.width/2+26,d.y=320,a.addChild(d),e.swiperContainer.addChild(a),e.ufoSlides.push(a),a.interactive=!0,a.on("pointertap",e.ufoSlidePointerDown,e),a.y=600},r=0;r<this.vueInstance.$store.state.lessonPartsList.length;r++){var u,l,h,c,d;o(r)}this.ufoSlides.forEach(function(e,t){e.x=650*t}),this.addChild(this.swiperContainer),this.swiperContainer.x=650,this.swiperContainer.interactive=!0,this.swiperContainer.on("tap",function(){}),this.swiperPosition=t.vueInstance.indexPageInitialSlide-1,this.interactive=!0,this.on("pointerdown",this.scence_pointerdown,this),this.showFocusAnimation(t.swiperPosition+1,function(){}),this.swiperSlideTo.call(this,t.swiperPosition,function(){},0),this.swiperHammer=new F({swiperContainer:t,swiperArea:{x:0,width:1920,y:300,height:1e3}}),this.swiperHammer.setMoveLeftCallBack(function(){t.swiperPosition>=t.ufoSlides.length-2||(t.swiperAnimating=!0,t.swiperPosition<=t.ufoSlides.length-3&&t.swiperPosition++,t.swiperSlideTo(t.swiperPosition,function(){t.showFocusAnimation(t.swiperPosition+1,function(){})}))}),this.swiperHammer.setMoveRightCallBack(function(){t.swiperPosition<=-1||(t.swiperAnimating=!0,t.swiperPosition>-1&&t.swiperPosition--,t.swiperSlideTo(t.swiperPosition,function(){t.showFocusAnimation(t.swiperPosition+1,function(){})}))}),this.addChild(this.rightTouchBtn),this.addChild(this.leftTouchBtn),K.vueInstance=t.vueInstance,this.gameMenuBar=new K,this.addChild(this.gameMenuBar),this.gameMenuBar.backBtnShow=!0,this.gameMenuBar.homeBtnShow=!1,this.gameMenuBar.bookBtnShow=!0,this.gameMenuBar.soundBtnShow=!1,this.gameMenuBar.updateGameMenu(),K.freeze=!1,setTimeout(function(){t.vueInstance.showMagicBook&&(t.swiperHammer.lock=!0,t.gameMenuBar.bookScene.openBook()),0==t.vueInstance.bookOpened&&t.vueInstance.gameHasBeenCompleted&&t.gameMenuBar.bookScene.openEnergyCan(!0),Number(t.vueInstance.openMagicBookByGameIndex)>=1&&(t.gameMenuBar.bookScene.openBook(),t.swiperHammer.lock=!0,console.log(Number(!1)))},300),this.gameMenuBar.setBackBtn_tapHandler(function(){console.log("返回主页"),window.parent.postMessage({type:"preparationClose"},"*")}),this.gameMenuBar.setBookBtn_tapHandler(function(){K.freeze||(t.swiperHammer.lock=!0,t.gameMenuBar.bookScene.openBook())}),t.vueInstance.$watch(function(){return t.vueInstance.energyCurrentNum},function(t){e.gameMenuBar.energy=t}),this.gameMenuBar.energyOnce=t.vueInstance.energyCurrentNum,this.leftTouchBtn.x=50,this.leftTouchBtn.y=300,this.rightTouchBtn.x=1400,this.rightTouchBtn.y=300,this.rightTouchBtn.alpha=this.leftTouchBtn.alpha=0,this.rightTouchBtn.interactive=!0,this.leftTouchBtn.interactive=!0,this.rightTouchBtn.on("pointertap",this.rightAreaPointerTap,this),this.leftTouchBtn.on("pointertap",this.leftAreaPointerTap,this)}},{key:"swiperSlideTo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.3,a=this;TweenMax.to(this.swiperContainer,n,{x:650*e*-1,onComplete:function(){t(),a.swiperAnimating=!1},onStart:function(){a.swiperAnimating=!0}})}},{key:"ufoSlidePointerDown",value:function(e){var t=this;if(t.swiperHammer&&0==t.swiperHammer.swiperMovedX){var n=e.currentTarget.myIndex;t.leftTouchBtn.interactive=t.rightTouchBtn.interactive=!1,t.swiperHammer.removeAllSwiperListener(),t.swiperHammer=null,e.currentTarget.removeListener("pointertap",this.ufoSlidePointerDown,this),e.currentTarget.getChildAt(1).state.setAnimation(0,"catching1",!1),e.currentTarget.getChildAt(1).state.addListener({complete:function(e){"catching1"==e.animation.name&&(x.setMaskShow(!0),setTimeout(function(){t.vueInstance.$router.push("/index/"+t.vueInstance.lessonPartsList[n].name),t.vueInstance.SET_LESSONPARTSINDEX(n),t.vueInstance.SET_INDEXPAGEINITIALSLIDE(n)},1e3))}}),K.freeze=!0,j.audios.hand_down2.play(),setTimeout(function(){j.audios.hand_up.play()},1800)}}},{key:"scence_pointerdown",value:function(e){e.data.global.y>325&&e.data.global.y}},{key:"leftAreaPointerTap",value:function(){var e=this;0==e.swiperHammer.swiperMovedX&&(e.swiperPosition>-1&&e.swiperPosition--,e.swiperSlideTo(e.swiperPosition,function(){e.showFocusAnimation(e.swiperPosition+1,function(){})}))}},{key:"rightAreaPointerTap",value:function(){var e=this;0==e.swiperHammer.swiperMovedX&&(e.swiperPosition<=e.ufoSlides.length-3&&e.swiperPosition++,e.swiperSlideTo(e.swiperPosition,function(){e.showFocusAnimation(e.swiperPosition+1,function(){})}))}}]),t}(PIXI.Container),J={name:"module1",mixins:[I],data:function(){return{gameConfig:"static/module1/gameconfig.json"}},computed:d()({},Object(v.c)(["lessonPartsList","bookOpened","openMagicBookByGameIndex","gameThemeType","showMagicBook","energyCurrentNum","alreadyHasOneCard","indexPageInitialSlide","gameHasBeenCompleted","alreadyHasOneCard","assetsPages","assetsPages","assetsResources","allLessonsNum","baseAssetsCompleted","completedLessonNum","allLessonCompleteStat","restArrangementStat","allPartNames","gameInitResponse","allGameCards"]),{ufoStyle:function(){return{backgroundImage:'url("static/img/indexpage/table.png")',backgroundSize:"100% 100%",backgroundRepeat:"no-repeat"}}}),created:function(){},mounted:function(){var e=this;e.lessonPartsList.length<=0?e.axios.get("static/preparation.json").then(function(t){e.SET_GAMEINITRESPONSE(t.data),e.SET_GAMETHEMETYPE(t.data.themeType),e.gameInit.call(e,t.data)}):e.gameInit.call(e,e.gameInitResponse)},methods:d()({},Object(v.b)(["PUSH_GAMES","SET_BOOKOPENED","SET_GAMETHEMETYPE","SET_MAGICBOOKBYGAMEINDEX","SET_SHOWMAGICBOOK","SET_INDEXPAGEINITIALSLIDE","SET_ALREADYHASONECARD","SET_ASSETSRESOURCES","SET_ALLASSETSPACKAGE","SET_ASSETSPAGES","SET_COMPLETEDLESSONNUM","SET_GAMEHASBEENCOMPLETED","SET_ENERGY","SET_ALLPARTNAMES","SET_GAMEINITRESPONSE","SET_ALLLESSONNUM","SET_GAMECARDS","SET_PREPARATION","SET_LESSONPARTSINDEX","SET_LESSONPARTSLIST","SET_BASEASSETSCOMPLETE","SET_LESSONCOMPLETESTAT","SET_RESTARRANGEMENTSTAT","SET_ALLLESSONCOMPONENTSNAMES"]),{gameInit:function(e){var t=this,n=[],a=[],i=[];t.getStuAnswerPromise().then(function(s){t.$router.options.routes.forEach(function(e,t){if(e.children){var a=e.children.filter(function(e,t){if(e.meta)return null!=e.meta.completed});n.push(a)}}),n.forEach(function(e){e.forEach(function(e){a.push(e.name),i.push(e)})}),i.filter(function(e){return 1==e.meta.completed}),t.slideLists=e.menus.map(function(e){return e.name}),s&&s.detail&&s.detail.length&&(s.detail.forEach(function(e,t){i[e]&&i[e].meta&&(i[e].meta.completed=1)}),t.SET_COMPLETEDLESSONNUM(s.detail.length)),t.updateRestArrangementStat(),t.SET_ALLLESSONNUM(a.length),t.SET_ALLLESSONCOMPONENTSNAMES(a),t.SET_LESSONCOMPLETESTAT(n),0==t.lessonPartsList.length&&t.SET_ALLASSETSPACKAGE(a),t.SET_LESSONPARTSLIST(e.menus),t.SET_ALLPARTNAMES(t.slideLists),t.completedLessonNum>=t.allLessonsNum&&t.SET_GAMEHASBEENCOMPLETED(!0),t.alreadyHasOneCard?t.SET_GAMECARDS(Number(s.card)+1):t.SET_GAMECARDS(Number(s.card)),t.SET_BOOKOPENED(s.opened),s.isOpenBook&&s.isOpenBook&&t.SET_MAGICBOOKBYGAMEINDEX(s.isOpenBook)},function(e){console.log("error:",e)})},getStuAnswerPromise:function(){var e=!0;return new G.a(function(t,n){window.parent.postMessage({type:"indexcomplete"},"*"),window.addEventListener("message",function(n){"getId"===n.data.type?t(n.data.stuAnswer):e&&(t({detail:[],card:2,opened:1,isOpenBook:0}),e=!1)})})},gameStart:function(e){var t=this,n={};x.loading=t.$parent.$refs.masker,x.setMaskShow(!1,0);n.monster=document.getElementById("starmonster"),n.planet1=document.getElementById("load_planet1"),n.planet2=document.getElementById("load_planet2"),n.meter=document.getElementById("load_meteor"),n.starmonsterImg=new Image,n.starmonsterImg.src="static/img/loadingpage/starmonster.gif",n.starmonsterImg.onload=function(){n.monster.setAttribute("src","static/img/loadingpage/starmonster.gif"),n.starmonsterImg=null},p.TweenMax.to(n.meter,0,{left:"19.8rem",top:"0rem",opacity:1}),n.tl=new TimelineMax({repeat:-1,delay:3,repeatDelay:3}),n.tm_meter=p.TweenMax.to(n.meter,2,{bezier:{type:"soft",values:[{left:"16.2rem",top:"1rem"},{left:"16.2rem",top:"1rem"},{left:"9rem",top:"4rem"},{left:"-2rem",top:"12rem"}],autoRotate:!0}}),n.tl.add(n.tm_meter),n.tm_plane2=p.TweenMax.to(n.planet2,25,{bezier:[{left:"8rem",top:"+=0.8rem"},{left:"12rem",top:"-=0.4rem"},{left:"16rem",top:"+=1rem"},{left:"19rem",top:"-=0.8rem"}]}),n.tm_plane1=p.TweenMax.to(n.planet1,25,{bezier:[{left:"10rem",top:"+=0.3rem"},{left:"12rem",top:"-=0.3rem"},{left:"14rem",top:"+=.3rem"},{left:"16rem",top:"-=0.3rem"}]}),n.progressBar=document.getElementById("progress_masker"),n.intervalment=setInterval(function(){n.progress&&(p.TweenMax.to(n.monster,.3,{left:5.2+n.progress/100*6.78+"rem"}),p.TweenMax.to(n.progressBar,.3,{width:n.progress/100*6.78+"rem"}))},10),t.axios.get("static/assetsConfig.json").then(function(a){t.axios.get("static/allSounds.json").then(function(i){j.reset(),j.init(i.data,"static/sound/",function(){for(var i=[],s=0;s<t.allPartNames.length;s++)switch(t.allPartNames[s]){case"song":i.push({name:"indexMonster1_json",url:"static/themetypeui/monster1_song.json"});break;case"vocabulary":i.push({name:"indexMonster2_json",url:"static/themetypeui/monster2_vocabulary.json"});break;case"sentences":i.push({name:"indexMonster3_json",url:"static/themetypeui/monster3_sentences.json"});break;case"story":case"reading":i.push({name:"indexMonster4_json",url:"static/themetypeui/monster4_story.json"});break;case"grammar":i.push({name:"indexMonster5_json",url:"static/themetypeui/monster5_grammar.json"});break;case"text":i.push({name:"indexMonster6_json",url:"static/themetypeui/monster6_text.json"});break;case"ketpet":i.push({name:"indexMonster7_json",url:"static/themetypeui/monster7_ketpet.json"})}PIXI.loader.add(a.data).add(i).on("progress",function(e){n.progress=e.progress}).load(function(a,i){var s=new PIXI.Container,o=new PIXI.spine.Spine(PIXI.loader.resources.monsterStartPage_json.spineData);o.x=960,o.y=540;var r=new PIXI.Graphics;r.beginFill(16777215),r.drawRect(0,0,1920,1080),r.endFill(),r.interactive=!0,o.state.setAnimation(0,"animation",!0);var u=new PIXI.Graphics;u.beginFill(16777215,0),u.drawRect(0,0,400,200),u.endFill(),u.x=760,u.y=820,u.interactive=!0,s.addChild(r),s.addChild(o),s.addChild(u),u.on("pointertap",function(){u.destroy(),o.destroy(),r.destroy(),j.audios.bgSound.play(),j.audios.bgSound.loop=-1,j.audios.bgSound.volume=1,t.$router.push("/index"),u.removeListener("pointertap")}),e.stage.addChild(s),t.SET_ASSETSPAGES({assetsName:"indexPage",completedStat:1}),x.setMaskShow(!1),n.loading=document.getElementsByClassName("container")[0],n.loading.parentNode.removeChild(n.loading),clearInterval(n.intervalment),document.getElementById("app").style.cursor="none",PIXI.loader.removeListener("progress"),n.tm_meter.kill(),n.tm_plane1.kill(),n.tm_plane2.kill(),n=null,Number(t.openMagicBookByGameIndex>0)&&t.$router.push("/index")})})})})}})},Z={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"bgContainer"},[t("pixi-canvas",{on:{startGame:this.gameStart}})],1)},staticRenderFns:[]};var Q=n("VU/8")(J,Z,!1,function(e){n("dTuf")},"data-v-5840edc6",null).exports,ee={name:"module1",mixins:[I],data:function(){return{gameConfig:"static/module1/gameconfig.json"}},computed:d()({},Object(v.c)(["lessonPartsList","bookOpened","openMagicBookByGameIndex","gameThemeType","showMagicBook","energyCurrentNum","alreadyHasOneCard","indexPageInitialSlide","gameHasBeenCompleted","alreadyHasOneCard","assetsPages","assetsPages","assetsResources","assetsResources","allLessonsNum","baseAssetsCompleted","completedLessonNum","allLessonCompleteStat","restArrangementStat","allPartNames","gameInitResponse","allGameCards"]),{ufoStyle:function(){return{backgroundImage:'url("static/img/indexpage/table.png")',backgroundSize:"100% 100%",backgroundRepeat:"no-repeat"}}}),mounted:function(){0==this.$store.state.lessonPartsList.length&&(this.$router.push("/"),window.location.reload())},methods:d()({},Object(v.b)(["PUSH_GAMES","SET_GAMETHEMETYPE","SET_BOOKOPENED","SET_MAGICBOOKBYGAMEINDEX","SET_SHOWMAGICBOOK","SET_INDEXPAGEINITIALSLIDE","SET_ALREADYHASONECARD","SET_ASSETSRESOURCES","SET_ALLASSETSPACKAGE","SET_ASSETSPAGES","SET_COMPLETEDLESSONNUM","SET_GAMEHASBEENCOMPLETED","SET_ENERGY","SET_ALLPARTNAMES","SET_GAMEINITRESPONSE","SET_ALLLESSONNUM","SET_GAMECARDS","SET_PREPARATION","SET_LESSONPARTSINDEX","SET_LESSONPARTSLIST","SET_BASEASSETSCOMPLETE","SET_LESSONCOMPLETESTAT","SET_RESTARRANGEMENTSTAT","SET_ALLLESSONCOMPONENTSNAMES"]),{gameStart:function(e){var t=new V({json:null,app:e,res:PIXI.loader.resources,vueInstance:this});e.stage.addChild(t),x.setMaskShow(!1),j.audios.bgSound.volume=1}})},te={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"bgContainer"},[t("pixi-canvas",{on:{startGame:this.gameStart}})],1)},staticRenderFns:[]};var ne=n("VU/8")(ee,te,!1,function(e){n("l3xg")},"data-v-b4dc1968",null).exports,ae=function(e){function t(e){S()(this,t);var n=R()(this,(t.__proto__||O()(t)).call(this));return n.resources=PIXI.loader.resources,n.vueInstance=e.vueInstance,n.gameMenuBars=null,n.gamePopups=null,n.gameLevel=0,n.bearDefaultAn=null,n.practiceBoxes=[],n.monsterHasDroped=!1,n.monster=null,n.monsterFirstEntry=null,n.canDragDown=!1,n.THEME_TYPE=K.vueInstance.gameThemeType,n.once("added",n.addedToStage,n),n}return $()(t,e),y()(t,[{key:"killAlias",value:function(e){return e.replace(/[0-9]+/g,"")}},{key:"createCommonAtlas",value:function(e){return new PIXI.Sprite(PIXI.loader.resources.commons_atlas.textures[e])}},{key:"getSlotRegionByName",value:function(e,t){for(var n=0;n<e.slotContainers.length;n++)for(var a=0;a<e.slotContainers[n].children.length;a++)if(e.slotContainers[n].children[a].region.name==t)return e.slotContainers[n]}},{key:"clickBoxHandler",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments[2],a=this;0!=this.canDragDown&&1!=this.monsterHasDroped&&(this.monsterHasDroped=!0,K.freeze=!0,this.monster.y=650,0==e?("learning"==a.killAlias(n.currentTarget.boxName)?n.currentTarget.state.setAnimation(0,"learning_select",!0):n.currentTarget.state.setAnimation(0,"practice_select",!0),TweenMax.to(a.monster,t,{x:a.practiceBoxes[0].x,onComplete:function(){a.monster.state.addAnimation(0,"dropdown",!1,0),j.audios.hand_down.play()}}),this.monster.state.addListener({complete:function(t){"dropdown"==t.animation.name&&(setTimeout(function(){a.vueInstance.$store.dispatch("SET_MODULEINDEX",e);var t=a.vueInstance.$store.state.lessonPartsList[a.vueInstance.$store.state.lessonPartsIndex].menus;a.vueInstance.$store.dispatch("SET_MODULELIST",t),a.vueInstance.$router.push(a.vueInstance.$route.fullPath+"/"+a.vueInstance.$store.state.currentModuleList[e].name)},1e3),x.setMaskShow(!0))}})):1==e&&("learning"==a.killAlias(n.currentTarget.boxName)?n.currentTarget.state.setAnimation(0,"learning_select",!0):n.currentTarget.state.setAnimation(0,"practice_select",!0),TweenMax.to(a.monster,t,{x:a.practiceBoxes[1].x,onComplete:function(){a.monster.state.addAnimation(0,"dropdown",!1,0),j.audios.hand_down.play()}}),this.monster.state.addListener({complete:function(t){"dropdown"==t.animation.name&&setTimeout(function(){a.vueInstance.$store.dispatch("SET_MODULEINDEX",e);var t=a.vueInstance.$store.state.lessonPartsList[a.vueInstance.$store.state.lessonPartsIndex].menus;a.vueInstance.$store.dispatch("SET_MODULELIST",t),a.vueInstance.$router.push(a.vueInstance.$route.fullPath+"/"+a.vueInstance.$store.state.currentModuleList[e].name)},1e3),x.setMaskShow(!0)}})))}},{key:"destroyed",value:function(){this.gameMenuBars.clearGameMenuEvents(),this.gameMenuBars.destroy(),this.gameMenuBars=null}},{key:"addedToStage",value:function(){var e=this,t=this;setTimeout(function(){t.canDragDown=!0},400);var n=new PIXI.Sprite(t.resources.choiceDesk_png.texture),a=new PIXI.Sprite(t.resources.choicebg_jpg.texture);this.addChild(a);var i=t.resources.boyskeleton.spineData,s=new PIXI.spine.Spine(i);switch(s.scale.x=s.scale.y=.75,s.x=1610,s.y=740,s.skeleton.setSkinByName("boy2"),s.skeleton.setSlotsToSetupPose(),s.state.setAnimation(0,"hello2",!0),t.addChild(s),this.THEME_TYPE){case 1:s.tint=16760516;break;case 2:s.tint=16767136;break;case 3:s.tint=14417796;break;case 5:s.tint=15189247}this.addChild(n),n.y=860;for(var o=t.resources.practiceBox_skeleton.spineData,r=t.vueInstance.$store.state.lessonPartsList[t.vueInstance.$store.state.lessonPartsIndex].menus,u=0;u<r.length;u++){var l=new PIXI.spine.Spine(o);switch(t.THEME_TYPE){case 1:l.skeleton.setSkinByName("dorpbox1"),l.skeleton.setSlotsToSetupPose();break;case 2:l.skeleton.setSkinByName("dorpbox2"),l.skeleton.setSlotsToSetupPose();break;case 3:l.skeleton.setSkinByName("dorpbox3"),l.skeleton.setSlotsToSetupPose();break;case 4:l.skeleton.setSkinByName("dorpbox4"),l.skeleton.setSlotsToSetupPose();break;case 5:l.skeleton.setSkinByName("dorpbox5"),l.skeleton.setSlotsToSetupPose()}t.practiceBoxes.push(l),this.addChild(l)}1==t.practiceBoxes.length?(t.practiceBoxes[0].x=960,t.practiceBoxes[0].y=860,t.practiceBoxes[0].interactive=!0,t.practiceBoxes[0].scale.x=t.practiceBoxes[0].scale.y=.86,t.practiceBoxes[0].state.setAnimation(0,t.killAlias(r[0].name)+"_warming",!0),t.practiceBoxes[0].boxName=t.killAlias(r[0].name),t.practiceBoxes[0].on("pointerdown",t.clickBoxHandler.bind(t,0,0),t)):(t.practiceBoxes[0].x=610,t.practiceBoxes[0].y=860,t.practiceBoxes[1].x=1310,t.practiceBoxes[1].y=860,t.practiceBoxes.forEach(function(e,n){e.scale.x=e.scale.y=.86,e.interactive=!0,e.boxName=t.killAlias(r[n].name),e.on("pointerdown",t.clickBoxHandler.bind(t,n,1),t)}),t.practiceBoxes[0].state.setAnimation(0,t.killAlias(r[0].name)+"_warming",!0),t.practiceBoxes[1].state.setAnimation(0,t.killAlias(r[1].name)+"_warming",!0));var h=null;switch(t.vueInstance.$store.state.lessonPartsList[t.vueInstance.$store.state.lessonPartsIndex].name){case"song":h=t.resources.indexMonster1_json.spineData;break;case"vocabulary":h=t.resources.indexMonster2_json.spineData;break;case"sentences":h=t.resources.indexMonster3_json.spineData;break;case"story":case"reading":h=t.resources.indexMonster4_json.spineData;break;case"grammar":h=t.resources.indexMonster5_json.spineData;break;case"text":h=t.resources.indexMonster6_json.spineData;break;case"ketpet":h=t.resources.indexMonster7_json.spineData}var c=new PIXI.spine.Spine(h);t.monster=c,c.x=960,c.y=650,this.addChild(c),this.monsterFirstEntry=c.state.setAnimation(0,"catching2",!1),this.gameMenuBars=new K,this.addChild(this.gameMenuBars),K.freeze=!1,this.gameMenuBars.bookBtnShow=!1,this.gameMenuBars.backBtnShow=!0,this.gameMenuBars.homeBtnShow=!1,this.gameMenuBars.updateGameMenu(),this.gameMenuBars.setBackBtn_tapHandler(function(){setTimeout(function(){t.vueInstance.$router.push("/index/")},1e3),x.setMaskShow(!0)}),this.vueInstance.$watch(function(){return t.vueInstance.energyCurrentNum},function(t){e.gameMenuBars.energy=t}),this.gameMenuBars.energyOnce=t.vueInstance.energyCurrentNum}}]),t}(PIXI.Container),ie=null,se={name:"choice-interface",data:function(){return{moduleList:[],pixiApp:null}},beforeCreate:function(){0==this.$store.state.lessonPartsList.length&&(this.$router.push("/"),window.location.reload())},beforeDestroy:function(){j.audios.bgSound.volume=0},destroyed:function(){ie&&(ie.destroyed(),ie.destroy())},mounted:function(){this.SET_MODULEINDEX(0),this.moduleList=this.lessonPartsList[this.lessonPartsIndex].menus},computed:d()({},Object(v.c)(["lessonPartsList","energyCurrentNum","assetsPages","assetsResources","lessonPartsIndex","currentModuleList","baseAssetsCompleted"]),{bgContainer:function(){return{backgroundImage:'url("static/img/choicepage/back2.jpg")',backgroundSize:"100% 100%",backgroundRepeat:"no-repeat"}}}),methods:d()({},Object(v.b)(["SET_MODULEINDEX","SET_ASSETSPAGES","SET_CANVASPAGE","PUSH_GAMES","SET_PREPARATION","SET_LESSONPART","SET_MODULELIST","SET_BASEASSETSCOMPLETED"]),{gameStart:function(e){var t=this;function n(){var n=new ae({app:e,ticker:e.ticker,resources:PIXI.loader.resources,vueInstance:t});e.stage.addChild(n),ie=n,x.setMaskShow(!1)}1==t.assetsPages.choicePages?n.call(t):(PIXI.loader.add([{name:"choiceDesk_png",url:"static/themetypeui/back2ground.png"},{name:"practiceBox_skeleton",url:"static/img/choicepage/boxskeleton/skeleton.json"},{name:"backbg_jpg",url:"static/themetypeui/backbg.jpg"},{name:"practicebg_jpg",url:"static/themetypeui/practicebg.jpg"}]),PIXI.loader.load(function(e,a){n.call(t),t.SET_ASSETSPAGES({assetsName:"choicePages",completedStat:1}),x.setMaskShow(!1)}))}})},oe={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"bgContainer"},[t("pixi-canvas",{on:{startGame:this.gameStart}})],1)},staticRenderFns:[]};var re=n("VU/8")(se,oe,!1,function(e){n("nBsY")},"data-v-5c929877",null).exports,ue={render:function(){var e=this.$createElement;return(this._self._c||e)("router-view")},staticRenderFns:[]},le=n("VU/8")({name:"choice-interface-root"},ue,!1,null,null,null).exports,he=n("CqLJ"),ce=n.n(he),de=function(e){function t(e){S()(this,t);var n=R()(this,(t.__proto__||O()(t)).call(this));return n.headbtnDraggable=!1,n.gameConfig=e.gameConfig,n.video=e.video,n.vueInstance=e.vueInstance,n.gameMenuBar=e.gameMenu,n.videoLongTime=0,n.videoCurrentTime=0,n.videoTimeFormat="",n.isPlaying=!0,n.progressPercent=0,n.progressWidth=1362,n.draggableLongs=0,n.playedProgressBar=null,n.controlTimes=null,n.headbtn=n.progressbar=n.playbtn=n.pausebtn=null,n.clearAllDomListener=null,n.on("added",n.initial,n),n}return $()(t,e),y()(t,[{key:"toClockTime",value:function(e){return 0==Math.floor(e)?"00:00":ce()(1e3*Math.floor(e),"MM:ss")}},{key:"initial",value:function(){var e=this,t=new PIXI.Graphics;switch(t.beginFill(0,.5),t.drawRect(0,0,1920,120),t.endFill(),this.addChild(t),this.videoLongTime=this.video.duration,this.videoTimeFormat=e.toClockTime(this.video.currentTime)+" / "+e.toClockTime(this.videoLongTime),this.controlTimes=new PIXI.Text(this.videoTimeFormat,{fontFamily:"Arial",fontSize:32,fontWeight:"bold",fill:["#ffffff"],stroke:"#4a1850",strokeThickness:1}),this.playbtn=new PIXI.Sprite(PIXI.Texture.from("pausebtn_png")),this.playbtn.interactive=!0,this.addChild(this.playbtn),this.playbtn.x=90,this.playbtn.y=this.playbtn.height/2-20,this.progressbar=new PIXI.Graphics,K.vueInstance.gameThemeType){case 1:this.progressbar.lineStyle(4,12798603);break;case 2:this.progressbar.lineStyle(4,13005583);break;case 3:this.progressbar.lineStyle(4,4039756);break;case 4:this.progressbar.lineStyle(4,35835);break;case 5:this.progressbar.lineStyle(4,9918698)}this.progressbar.beginFill(13754606),this.progressbar.drawRoundedRect(0,0,this.progressWidth,18,10),this.progressbar.endFill(),this.progressbar.shadowBox=new PIXI.Graphics,this.progressbar.shadowBox.beginFill(0,.5),this.progressbar.shadowBox.drawRoundedRect(0,0,this.progressWidth,18,9),this.progressbar.shadowBox.endFill();var n=new PIXI.filters.BlurFilter;n.blur=5,this.progressbar.shadowBox.filters=[n],this.progressbar.shadowBox.scale.y=.5;var a=new PIXI.Graphics;switch(a.beginFill(13754606),a.drawRoundedRect(0,0,this.progressWidth,18,9),a.endFill(),this.playedProgressBar=new PIXI.Graphics,K.vueInstance.gameThemeType){case 1:this.playedProgressBar.beginFill(15301306);break;case 2:this.playedProgressBar.beginFill(16766553);break;case 3:this.playedProgressBar.beginFill(5759594);break;case 4:this.playedProgressBar.beginFill(45823);break;case 5:this.playedProgressBar.beginFill(12621049)}this.playedProgressBar.drawRect(0,0,100,18),this.playedProgressBar.endFill(),this.progressbar.addChild(a),this.playedProgressBar.mask=a,this.playedProgressBar.width=this.video.currentTime*this.progressPercent,this.progressbar.addChild(this.playedProgressBar),this.addChild(this.progressbar.shadowBox),this.addChild(this.progressbar),this.progressbar.x=this.playbtn.x+this.playbtn.width+50,this.progressbar.y=this.height/2-10,this.progressbar.shadowBox.y=this.progressbar.y+12,this.progressbar.shadowBox.x=this.progressbar.x;var i=new PIXI.Rectangle(0,-40,this.progressWidth,80);this.progressbar.hitArea=i,this.addChild(this.controlTimes),this.controlTimes.x=this.progressbar.x+this.progressbar.width+40,this.controlTimes.y=38,this.headbtn=new PIXI.Sprite(PIXI.Texture.from("headbtn_png")),this.headbtn.pivot.y=this.headbtn.height/2-5,this.progressbar.addChild(this.headbtn),this.progressbar.interactive=!0,this.headbtn.interactive=!0,this.headbtn.draggable=!1,this.draggableLongs=this.progressWidth-this.headbtn.width/2-20,this.headbtn.on("pointerdown",this.headbtnPointerDownHandler,this),this.headbtn.on("pointermove",this.headbtnPointerMoveHandler,this),this.parent.on("pointerup",this.headbtnPointerUpHandler,this),this.parent.on("pointerupoutside",this.headbtnPointerUpHandler,this),this.playbtn.on("pointerdown",this.changePlayBtnHandler,this),this.progressbar.on("pointerdown",this.clickProgressbar,this),this.video.addEventListener("timeupdate",this.videTimeupDateHandler.bind(e)),this.clearAllDomListener=function(){e.video.removeEventListener("timeupdate",e.videTimeupDateHandler.bind(e))}}},{key:"clearAllEvents",value:function(){this.headbtn.removeListener("pointermove",this.headbtnPointerMoveHandler,this),this.headbtn.removeListener("pointerup",this.headbtnPointerUpHandler,this),this.headbtn.removeListener("pointerupoutside",this.headbtnPointerUpHandler,this),this.playbtn.removeListener("pointerdown",this.changePlayBtnHandler,this),this.progressbar.removeListener("pointerdown",this.clickProgressbar,this),this.video.removeEventListener("timeupdate",this.videTimeupDateHandler,this)}},{key:"videTimeupDateHandler",value:function(e){var t=this;this.videoTimeFormat=this.toClockTime(e.currentTarget.currentTime)+" / "+this.toClockTime(this.videoLongTime),this.controlTimes.text=this.videoTimeFormat,this.headbtn.x=e.currentTarget.currentTime/this.videoLongTime*(this.progressWidth-35-20),this.playedProgressBar.width=(e.currentTarget.currentTime/this.videoLongTime+.01)*this.draggableLongs,this.video.currentTime>=this.video.duration&&(t.video.removeEventListener("timeupdate",t.videTimeupDateHandler,t),t.vueInstance.$route.meta.completed=1,t.vueInstance.setOwnLessonComplete(),t.parent.gameStat=0,0==t.vueInstance.gameHasBeenCompleted&&window.parent.postMessage({type:"stepSubmit",page:t.vueInstance.lessonCurrentPageIndex},"*"),t.vueInstance.$watch(function(){return t.vueInstance.energyCurrentNum},function(e){t.gameMenuBar.energy=e,t.gameMenuBar.playStars()}),setTimeout(function(){var e=t.vueInstance.$route.name==t.vueInstance.restArrangementStat[t.vueInstance.restArrangementStat.length-1];e&&!t.vueInstance.gameHasBeenCompleted&&setTimeout(function(){t.gameMenuBar.bookScene.openEnergyCan(!1)},t.vueInstance.showPopupDelay),setTimeout(function(){if(t.vueInstance.alreadyHasOneCard)return t.vueInstance.showCongra=!0,void new Audio("static/sound/win_jump.mp3").play();(t.vueInstance.gameHasBeenCompleted&&!t.vueInstance.alreadyHasOneCard&&t.gameMenuBar.bookScene.openEnergyCan(!0),t.vueInstance.gameHasBeenCompleted||0!=e)||(t.vueInstance.showCongra=!0,new Audio("static/sound/win_jump.mp3").play())},t.vueInstance.showPopupDelay),t.vueInstance.updateRestArrangementStat()},1))}},{key:"clickProgressbar",value:function(e){var t=e.currentTarget.parent.x+e.currentTarget.x+this.headbtn.width/2,n=e.data.global.x-t;this.progressPercent=n/this.draggableLongs,this.headbtn.x=n,this.playedProgressBar.width=(this.progressPercent+.01)*this.draggableLongs,this.video.currentTime=this.progressPercent*this.video.duration}},{key:"changePlayBtnHandler",value:function(e){this.isPlaying?(e.currentTarget.texture=PIXI.Texture.from("playbtn_png"),this.video.pause()):(e.currentTarget.texture=PIXI.Texture.from("pausebtn_png"),this.video.play()),this.isPlaying=!this.isPlaying}},{key:"headbtnPointerDownHandler",value:function(e){this.headbtnDraggable=!0}},{key:"headbtnPointerMoveHandler",value:function(e){if(1==this.headbtnDraggable){var t=this.x+e.currentTarget.parent.x+e.currentTarget.width/2,n=e.data.global.x-t;n>=0&&n<=this.progressWidth-e.currentTarget.width/2-20&&(this.progressPercent=n/this.draggableLongs,e.currentTarget.x=n,this.video.currentTime=this.progressPercent*this.video.duration,this.playedProgressBar.width=(this.progressPercent+.01)*this.draggableLongs)}}},{key:"headbtnPointerUpHandler",value:function(e){this.headbtnDraggable=!1}}]),t}(PIXI.Container),pe=function(e){function t(e){S()(this,t);var n=R()(this,(t.__proto__||O()(t)).call(this));return n.gameConfig=e.json,n.app=e.app,n.vueInstance=e.vueInstance,n.videoSprite=null,n.videoDom=null,n.videoIsComplete=!1,n.backBtn=n.homeBtn=null,n.topMenuIsShow=!0,n.topMenuFirstTimes=0,n.topMenuIsAnimating=!1,n.gameStat=0,n.gameMenuBar=null,n.goplayBtn=null,n.movieBg=null,n.grandScene=null,n.videoController=null,n.upponMenu=null,n.controllerIsShow=!1,n.currentMode=0,n.controllerStayTime=5,n.on("added",n.addedToStage,n),n}return $()(t,e),y()(t,[{key:"addedToStage",value:function(){var e=this,t=this;t.interactive=!0,this.grandScene=new PIXI.Container,this.upponMenu=new PIXI.Container;var n=new PIXI.Graphics;n.beginFill(0,.6),n.drawRect(0,0,1920,120),n.endFill();var a=new PIXI.filters.BlurFilter;a.blurY=30,n.filters=[a],this.upponMenu.addChild(n),this.upponMenu.y=-145,this.videoDom=m()('<video  src="'+this.gameConfig.movie+'"/>')[0];var i=PIXI.Texture.from(this.videoDom);i.baseTexture.autoPlay=!1,this.videoSprite=new PIXI.Sprite(i),this.videoDom.pause(),this.addChild(this.videoSprite),this.videoSprite.width=1392,this.videoSprite.height=783,this.videoSprite.pivot.x=-112,this.videoSprite.pivot.y=-69,this.movieBg=new PIXI.Sprite(PIXI.Texture.from("moviebg")),this.movieBg.pivot.x=this.movieBg.width/2,this.movieBg.pivot.y=this.movieBg.height/2,this.movieBg.x=960,this.movieBg.y=540,this.grandScene.addChild(this.movieBg),this.addChild(this.grandScene),this.addChild(this.upponMenu),this.goplayBtn=new PIXI.Sprite(PIXI.Texture.from("goplaybtn_png")),this.addChild(this.goplayBtn),this.goplayBtn.pivot.x=this.goplayBtn.width/2,this.goplayBtn.pivot.y=this.goplayBtn.height/2,this.goplayBtn.x=960,this.goplayBtn.y=540,this.goplayBtn.interactive=!0,this.goplayBtn.on("pointerdown",this.goplayBtnHandler,this),K.freeze=!1,t.gameMenuBar=new K,t.addChild(t.gameMenuBar),t.gameMenuBar.setBackBtn_tapHandler(function(){t.gobackHandler()}),t.gameMenuBar.setHomeBtn_tapHandler(function(){if(0==t.vueInstance.$route.meta.completed)t.vueInstance.popupType="shutback",t.vueInstance.showCongra=!0;else{setTimeout(function(){t.vueInstance.$router.push("/index/")},1e3),x.setMaskShow(!0);var e=t.vueInstance.$route.fullPath.split("/"),n=t.vueInstance.allPartNames.indexOf(e[2]);t.vueInstance.SET_INDEXPAGEINITIALSLIDE(Number(n))}}),t.gameMenuBar.backBtnShow=!1,t.gameMenuBar.homeBtnShow=!0,t.gameMenuBar.bookBtnShow=!1,t.gameMenuBar.updateGameMenu(),t.vueInstance.$watch(function(){return t.vueInstance.energyCurrentNum},function(t){e.gameMenuBar.energy=t,e.gameMenuBar.playStars()}),this.gameMenuBar.energyOnce=t.vueInstance.energyCurrentNum,this.videoDom.addEventListener("canplaythrough",this.videoCompleted.bind(t))}},{key:"videoCompleted",value:function(){0==this.videoIsComplete&&(this.videoController=new de({gameConfig:this.gameConfig,video:this.videoDom,vueInstance:this.vueInstance,gameMenu:this.gameMenuBar}),this.videoSprite.interactive=!0,this.videoSprite.on("pointerdown",this.videoClickedHandler,this),this.videoController.interactive=!0,this.videoController.on("pointermove",this.videoControllerHandler_pointermove,this),this.videoController.on("pointerdown",this.videoControllerHandler_pointerdown,this),this.addChild(this.videoController),this.videoController.y=1085),this.videoIsComplete=!0}},{key:"videoControllerHandler_pointermove",value:function(){this.controllerStayTime=2}},{key:"videoControllerHandler_pointerdown",value:function(){this.controllerStayTime=2}},{key:"destroy",value:function(){this.gameMenuBar.clearGameMenuEvents(),this.gameMenuBar.destroy(),this.gameMenuBar=null,this.videoDom.pause(),this.videoDom.removeEventListener("canplaythrough",this.videoCompleted.bind(self)),this.videoController.clearAllDomListener(),this.videoSprite.removeListener("pointerdown",this.videoClickedHandler,this),this.videoController.removeListener("pointermove",this.videoControllerHandler_pointermove,this),this.videoController.removeListener("pointerdown",this.videoControllerHandler_pointerdown,this),this.videoDom.removeEventListener("canplaythrough",this.videoCompleted.bind(this),this),this.controllerStayTime=0}},{key:"videoClickedHandler",value:function(){0!=this.currentMode&&(this.controllerStayTime=2,this.showMovieControl.call(this))}},{key:"gobackHandler",value:function(e){this.topMenuIsAnimating||(this.topMenuIsAnimating=!0,this.smallerMovie.call(this),this.hideMovieControl.call(this),this.gameMenuBar.foldDown(),this.gameMenuBar.homeBtnShow=!0,this.gameMenuBar.backBtnShow=!1,this.gameMenuBar.updateGameMenu(),this.videoDom&&this.videoDom.pause(),this.gameStat=0)}},{key:"showAllMovie",value:function(){var e=this;p.TweenMax.to(this.movieBg.scale,.6,{x:1.5,y:1.5,onComplete:function(){e.topMenuIsAnimating=!1}}),p.TweenMax.to(this.movieBg,.5,{alpha:0,delay:.3}),p.TweenMax.to(this.videoSprite,.3,{width:1921,height:1081,x:-338,y:-210}),this.gameMenuBar.homeBtnShow=!1,this.gameMenuBar.backBtnShow=!0,this.gameMenuBar.updateGameMenu()}},{key:"smallerMovie",value:function(){var e=this;this.currentMode=0,p.TweenMax.to(this.movieBg.scale,.6,{x:1,y:1,onComplete:function(){e.goplayBtn.alpha=1,e.goplayBtn.interactive=!0,e.topMenuIsAnimating=!1}}),p.TweenMax.to(this.movieBg,.3,{alpha:1}),this.videoController.playbtn.texture=PIXI.Texture.from("pausebtn_png"),this.videoController.video.pause(),this.videoController.isPlaying=!1,p.TweenMax.to(this.videoSprite,.6,{width:1392.725,height:783.725,x:0,y:0,delay:.1})}},{key:"showMovieControl",value:function(){var e=this;if(!e.controllerIsShow&&(e.controllerIsShow=!0,this.currentMode=1,e.videoController)){var t=null;e.controllerStayTime=1,p.TweenMax.to(e.videoController,.4,{y:960,onComplete:function(){t=setInterval(function(){if(e.controllerStayTime<=0)return clearInterval(t),e.hideMovieControl.call(e),void(t=null);e.controllerStayTime--},1e3)}}),p.TweenMax.to(e.upponMenu,.4,{y:0}),e.gameMenuBar.foldDown(),e.topMenuFirstTimes++}}},{key:"hideMovieControl",value:function(){var e=this;e.videoController&&p.TweenMax.to(e.videoController,.4,{y:1085}),e.videoController&&p.TweenMax.to(e.upponMenu,.4,{y:-145,onComplete:function(){e.controllerIsShow=!1,e.topMenuFirstTimes=0}}),1==e.gameStat&&e.gameMenuBar.foldUp()}},{key:"goplayBtnHandler",value:function(e){this.topMenuIsAnimating||(this.topMenuIsAnimating=!0,e.currentTarget.interactive=!1,this.showAllMovie(),this.showMovieControl(),e.currentTarget.alpha=0,this.videoDom&&this.videoDom.play(),this.videoController.playbtn.texture=PIXI.Texture.from("pausebtn_png"),this.videoController.video.play(),this.videoController.isPlaying=!0,this.gameStat=1)}}]),t}(PIXI.Container),ge={name:"congra-popup",props:{showType:{type:String,default:"popup1"}},data:function(){return{}},methods:{continueHandler:function(){this.$emit("continueClicked")},againHandler:function(){this.$emit("againClicked")},quitGame:function(){this.$emit("quitGame")},continueGame:function(){this.$emit("continueGame")}},computed:{backgroundPopup_shutback:function(){return{background:"url('static/img/menus/popups/tuichuyemian.png') no-repeat",backgroundSize:"100% 100%"}},backgroundPopup2:function(){return{background:"url('static/img/menus/popups/icon-tankuang.png') no-repeat",backgroundSize:"100% 100%"}},backgroundPopup1:function(){return{background:"url('static/img/menus/popups/icon-win.png') no-repeat",backgroundSize:"100% 100%"}},leftBtnPopup1:function(){return{position:"absolute",background:"url('static/img/menus/popups/btn-2.png') no-repeat",backgroundSize:"100% 100%",top:"7.8rem",left:".4rem"}},rightBtnPopup1:function(){return{position:"absolute",background:"url('static/img/menus/popups/btn-1.png') no-repeat",backgroundSize:"100% 100%",top:"7.8rem",left:"4.9rem"}},leftBtnPopup2:function(){return{position:"absolute",background:"url('static/img/menus/popups/btn-2.png') no-repeat",backgroundSize:"100% 100%",left:"1.2rem",top:"4.2rem"}},rightBtnPopup2:function(){return{position:"absolute",background:"url('static/img/menus/popups/btn-1.png') no-repeat",backgroundSize:"100% 100%",right:"1.2rem",top:"4.2rem"}},leftBtnPopup3:function(){return{position:"absolute",background:"url('static/img/menus/popups/btn-quit.png') no-repeat",backgroundSize:"100% 100%",left:"1.2rem",top:"4.2rem"}},rightBtnPopup3:function(){return{position:"absolute",background:"url('static/img/menus/popups/btn-1.png') no-repeat",backgroundSize:"100% 100%",right:"1.2rem",top:"4.2rem"}}}},me={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{position:"absolute",left:"0",top:"0",width:"100%",height:"100%","z-index":"9999999"}},["popup1"==e.showType?n("div",{staticClass:"maskerband"},[n("div",{staticClass:"popup1",style:e.backgroundPopup1},[n("div",{staticClass:"continuneBtn",style:e.leftBtnPopup1,on:{click:e.againHandler}}),e._v(" "),n("div",{staticClass:"continuneBtn",style:e.rightBtnPopup1,on:{click:e.continueHandler}})])]):e._e(),e._v(" "),"popup2"==e.showType?n("div",{staticClass:"maskerband"},[n("div",{staticClass:"popup2",style:e.backgroundPopup2},[n("div",{staticClass:"continuneBtn",style:e.leftBtnPopup2,on:{click:e.againHandler}}),e._v(" "),n("div",{staticClass:"continuneBtn",style:e.rightBtnPopup2,on:{click:e.continueHandler}})])]):e._e(),e._v(" "),"shutback"==e.showType?n("div",{staticClass:"maskerband"},[n("div",{staticClass:"popup2",style:e.backgroundPopup_shutback},[n("div",{staticClass:"continuneBtn",style:e.leftBtnPopup3,on:{click:e.quitGame}}),e._v(" "),n("div",{staticClass:"continuneBtn",style:e.rightBtnPopup3,on:{click:e.continueGame}})])]):e._e()])},staticRenderFns:[]};var ve=n("VU/8")(ge,me,!1,function(e){n("23CB")},"data-v-67b87ebb",null).exports,fe=null,Se={name:"module1",mixins:[I,C],data:function(){return{showCongra:!1,bookShow:!1,bookAniShow:!1,popupType:"popup2"}},components:{congraPopup:ve},computed:d()({},Object(v.c)(["restArrangementStat","allPartNames","alreadyHasOneCard","assetsPages","assetsGameConfig","assetsResources","completedLessonNum","allLessonsNum","showPopupDelay","allLessonComponentsNames","energyCurrentNum","lessonCurrentPageIndex","gameHasBeenCompleted"])),methods:d()({},Object(v.b)(["SET_CANVASPAGE","SET_INDEXPAGEINITIALSLIDE","SET_ASSETSPAGES","SET_ASSETSRESOURCES","SET_ASSETSGAMECONFIG","PUSH_GAMES","SET_LESSONCOMPLETESTAT","SET_RESTARRANGEMENTSTAT","SET_LESSONCURRENTPAGEINDEX"]),{clickContinue:function(){fe&&(this.showCongra=!1,this.alreadyHasOneCard?b.call(this,!1):b.call(this,!0))},againClicked:function(){fe&&(this.showCongra=!1,fe.videoDom.currentTime=0,fe.videoDom.play())},quitGame:function(){var e=this;setTimeout(function(){e.$router.push("/index/")},1e3),x.setMaskShow(!0);var t=this.$route.fullPath.split("/"),n=e.allPartNames.indexOf(t[2]);e.SET_INDEXPAGEINITIALSLIDE(Number(n))},continueGame:function(){this.showCongra=!1},gameStart:function(e){var t=this,n=this.$route.meta.assetsUrl;function a(n,a){var i=new pe({json:a.gameData,app:e,vueInstance:t});e.stage.addChild(i),fe=i,x.setMaskShow(!1)}x.setMaskShow(!0,0),t.axios.get("static/"+n+"/gameconfig.json").then(function(e){var i=e.data.assets.map(function(e,t){return{name:""+e.name,url:e.url}});T.call(t,n,i,a)})}}),beforeCreate:function(){0==this.$store.state.lessonPartsList.length&&(this.$router.push("/"),window.location.reload())},beforeDestroy:function(){},destroyed:function(){fe&&(fe.destroy(),fe=null)},mounted:function(){this.SET_LESSONCURRENTPAGEINDEX(Number(this.allLessonComponentsNames.indexOf(this.$route.name)))}},Be={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"moduleMain"},[n("pixi-canvas",{on:{startGame:e.gameStart}}),e._v(" "),n("transition",{on:{"before-enter":e.beforeEnter,enter:e.enter,leave:e.leave}},[e.showCongra?n("congraPopup",{attrs:{showType:e.popupType},on:{quitGame:function(t){e.quitGame()},continueGame:function(t){e.continueGame()},continueClicked:function(t){e.clickContinue()},againClicked:e.againClicked}}):e._e()],1)],1)},staticRenderFns:[]};var ye=n("VU/8")(Se,Be,!1,function(e){n("u0Po")},"data-v-3255ae40",null).exports,we=n("woOf"),ke=n.n(we),Te=function(e){function t(){S()(this,t);var e=R()(this,(t.__proto__||O()(t)).call(this));return e.maskerBg=null,e.on("added",e.addedToStage,e),e}return $()(t,e),y()(t,[{key:"addedToStage",value:function(){this.maskerBg=new PIXI.Graphics,this.maskerBg.beginFill(0,1),this.maskerBg.drawRect(0,0,1920,1080),this.maskerBg.endFill(),this.maskerBg.interactive=!1,this.addChild(this.maskerBg)}},{key:"showMakser",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.3,t=(arguments.length>1&&void 0!==arguments[1]&&arguments[1],this);p.TweenMax.to(this.maskerBg,e,{alpha:1,onStart:function(){t.maskerBg.interactive=!0}})}},{key:"hideMakser",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.3,t=(arguments.length>1&&void 0!==arguments[1]&&arguments[1],this);p.TweenMax.to(this.maskerBg,e,{alpha:0,onComplete:function(){t.maskerBg.interactive=!1}})}}]),t}(PIXI.Container),Ce=function(e){function t(e){S()(this,t);var n=R()(this,(t.__proto__||O()(t)).call(this));return n.gameConfig=e.json,n.app=e.app,n.ticker=e.ticker,n.resources=PIXI.loader.resources,n.vueInstance=e.vueInstance,n.gameLevel=0,n.cardList=[],n.boySpine=null,n.currentAudioPlaying=!1,n.gameAudio=null,n.maskerBg=null,n.swiperCtn=e.swiper,n.on("added",n.addedToStage,n),n}return $()(t,e),y()(t,[{key:"clearUp",value:function(){this.gameConfig=null,this.app=null,this.ticker=null,this.resources=null,this.gameLevel=null,this.cardList=null,this.boySpine=null}},{key:"addedToStage",value:function(){var e=this,t=new PIXI.Sprite(PIXI.loader.resources.backbg_jpg.texture);this.addChild(t),this.maskerBg=new Te,this.swiperContainer=new PIXI.Container;var n=e.resources.boyskeleton.spineData;this.boySpine=new PIXI.spine.Spine(n),this.boySpine.scale.x=this.boySpine.scale.y=.55,this.boySpine.x=1920+this.boySpine.width+300,this.boySpine.y=690,this.boySpine.skeleton.setSkinByName("boy3"),this.boySpine.skeleton.setSlotsToSetupPose(),this.boySpine.state.setAnimation(0,"next",!0),this.boySpine.alpha=0,this.addChild(this.boySpine),K.freeze=!1,e.gameMenuBar=new K,e.addChild(e.gameMenuBar),e.gameMenuBar.setBackBtn_tapHandler(function(){e.swiperCtn.slidePrev(300)}),e.gameMenuBar.setHomeBtn_tapHandler(function(){if(0==e.vueInstance.$route.meta.completed)e.vueInstance.popupType="shutback",e.vueInstance.showCongra=!0;else{setTimeout(function(){e.vueInstance.$router.push("/index/")},1e3),x.setMaskShow(!0),e.maskerBg.showMakser();var t=e.vueInstance.$route.fullPath.split("/"),n=e.vueInstance.allPartNames.indexOf(t[2]);e.vueInstance.SET_INDEXPAGEINITIALSLIDE(Number(n))}}),e.gameMenuBar.setSoundBtn_tapHandler(function(t){"playing"==t.currentTarget.status?e.stopAudios():e.playAudios()}),e.gameMenuBar.backBtnShow=!1,e.gameMenuBar.homeBtnShow=!0,e.gameMenuBar.bookBtnShow=!1,e.gameMenuBar.soundBtnShow=!0,e.gameMenuBar.updateGameMenu(),e.vueInstance.$watch(function(){return e.vueInstance.energyCurrentNum},function(t){e.gameMenuBar.energy=t,e.gameMenuBar.playStars()}),e.vueInstance.$watch(function(){return e.vueInstance.currentPage},function(t){t>0?(e.gameMenuBar.homeBtnShow=!0,e.gameMenuBar.backBtnShow=!0):(e.gameMenuBar.backBtnShow=!1,e.gameMenuBar.homeBtnShow=!0),e.gameMenuBar.updateGameMenu()}),this.gameMenuBar.energyOnce=e.vueInstance.energyCurrentNum,this.addChild(this.maskerBg),this.maskerBg.hideMakser()}},{key:"playAudios",value:function(){var e=this;e.stopAudios();var t=this.vueInstance.$route.meta.assetsUrl+"_"+this.gameConfig.pictureList[this.vueInstance.currentPage].audioSrc.replace(/\./g,"_");if(this.gameConfig.pictureList[this.vueInstance.currentPage].audioSrc&&""!=_.trim(this.gameConfig.pictureList[this.vueInstance.currentPage].audioSrc)){this.gameAudio=j.audios[t],this.gameAudio.play(),this.gameAudio.position=0;this.gameAudio.duration;this.gameAudio.on("complete",function(){e.gameMenuBar.soundBtn&&e.gameMenuBar.soundBtn.stop()}),this.gameMenuBar.soundBtn&&this.gameMenuBar.soundBtn.play(),e.gameMenuBar.soundBtnShow=!0,e.gameMenuBar.updateGameMenu()}else e.gameMenuBar.soundBtnShow=!1,e.gameMenuBar.updateGameMenu()}},{key:"stopAudios",value:function(){this.gameAudio&&(this.gameAudio.stop(),this.gameMenuBar.soundBtn.stop())}},{key:"hideBoy",value:function(){this.boySpine&&p.TweenMax.to(this.boySpine,.3,{x:2500,alpha:0})}},{key:"showBoy",value:function(){this.boySpine&&(this.boySpine.alpha=1,this.boySpine.x=1800,p.TweenMax.to(this.boySpine,.3,{x:1950})),new Audio("static/sound/nextpart.mp3").play()}},{key:"destroyed",value:function(){this.stopAudios(),this.gameMenuBar&&(this.gameMenuBar.clearGameMenuEvents(),this.gameMenuBar.destroy())}}]),t}(PIXI.Container),Ie=null,be=null,xe=null,Pe=null,Ee={name:"module1",mixins:[I,C],data:function(){return{slideLists:[],paginationLists:[],paginationPicture:{},openEnergyed:{type:!1,opened:!1},popupType:"popup2",paginationballs_style:{opacity:0},backShow:!1,homeShow:!0,currentPage:0,currentGameLevel:0,showCongra:!1,globalStatic:null,swiperX:[],scaleArr:[],currentLessonCompleted:!1,leftTriangle_style:{},rightTriangle_style:{},currentPaginationPages:-1,canvas2Style:{pointerEvents:"none"}}},components:{congraPopup:ve,masker:E},computed:d()({},Object(v.c)(["lessonPartsList","allPartNames","alreadyHasOneCard","assetsGameConfig","lessonPartsIndex","assetsPages","assetsResources","completedLessonNum","allLessonsNum","showPopupDelay","allLessonComponentsNames","energyCurrentNum","restArrangementStat","lessonCurrentPageIndex","gameHasBeenCompleted"]),{leftTriangleShow:function(){return this.currentPaginationPages>=4},rightTriangleShow:function(){return this.currentPaginationPages<=this.slideLists.length-5}}),methods:d()({},Object(v.b)(["SET_CANVASPAGE","SET_INDEXPAGEINITIALSLIDE","SET_ASSETSGAMECONFIG","SET_ASSETSPAGES","SET_ASSETSRESOURCES","PUSH_GAMES","SET_LESSONCOMPLETESTAT","SET_RESTARRANGEMENTSTAT","SET_LESSONCURRENTPAGEINDEX"]),{goPrevPagi:function(){xe&&xe.slidePrev()},goNextPagi:function(){xe&&xe.slideNext()},boyBtnAreaClicked:function(){var e=this;be&&be.activeIndex<be.slides.length-1||(e.$route.meta.completed=1,e.setOwnLessonComplete(),Ie.stopAudios(),0==e.gameHasBeenCompleted&&window.parent.postMessage({type:"stepSubmit",page:e.lessonCurrentPageIndex},"*"),setTimeout(function(){var t=e.$route.name==e.restArrangementStat[e.restArrangementStat.length-1];t&&!e.gameHasBeenCompleted&&setTimeout(function(){e.openEnergyed={type:!1,opened:!0}},e.showPopupDelay),setTimeout(function(){if(e.alreadyHasOneCard)return e.showCongra=!0,void new Audio("static/sound/win_jump.mp3").play();(e.gameHasBeenCompleted&&!e.alreadyHasOneCard&&(e.openEnergyed={type:!0,opened:!0}),e.gameHasBeenCompleted||0!=t)||(e.showCongra=!0,new Audio("static/sound/win_jump.mp3").play())},e.showPopupDelay),e.updateRestArrangementStat()},1))},quitGame:function(){var e=this;setTimeout(function(){e.$router.push("/index/")},1e3);var t=this.$route.fullPath.split("/"),n=e.allPartNames.indexOf(t[2]);e.SET_INDEXPAGEINITIALSLIDE(Number(n)),x.setMaskShow(!0)},continueGame:function(){this.showCongra=!1},clickContinue:function(){this.gameHasBeenCompleted?b.call(this,!1):b.call(this,!0)},againClicked:function(){this.showCongra=!1,be&&be.slideTo(0,500)},swiperMainMouseEnter:function(){k.setAnimation("swipe")},swiperMainMouseLeave:function(){k.setAnimation("normal")},paginationBallMouseLeave:function(){k.setAnimation("normal")},paginationBallMouseEnter:function(){k.setAnimation("click")},paginationBallClick:function(e){var t=this;xe&&(e==xe.activeIndex?xe.slideTo(e-4,300,!1):xe.slideTo(e,300,!1),Array.prototype.forEach.call(this.slideLists,function(e,n){xe.slides.eq(n).find(".paginationballs").css({backgroundImage:"url("+t.globalStatic+"/pagiball1.png)",backgroundRepeat:"no-repeat",backgroundSize:"contain",color:"#539bc5"})}),xe.slides.eq(e).find(".paginationballs").css({backgroundImage:"url("+t.globalStatic+"/pagiball2.png)",backgroundRepeat:"no-repeat",backgroundSize:"contain",color:"white"}),be.slideTo(e,300,!1),this.currentPage=e)},gameStart2:function(e){var t=this,n=new K;new Te;e.stage.addChild(n),n.backBtnShow=!1,n.homeBtnShow=!1,n.bookBtnShow=!1,n.soundBtnShow=!1,n.updateGameMenu(),n.energyBar.alpha=0,n.soundBtn.alpha=0,t.$watch(function(){return t.openEnergyed},function(e){1==e.opened&&1==e.type?(n.bookScene.openEnergyCan(!0),t.canvas2Style={pointerEvents:"auto"}):1==e.opened&&0==e.type&&(n.bookScene.openEnergyCan(!1),t.canvas2Style={pointerEvents:"auto"})},{deep:!0})},gameStart:function(e){var t=this;function n(n,a){ke()(t.paginationballs_style,{backgroundImage:"url("+t.globalStatic+"/pagiball1.png)",backgroundRepeat:"no-repeat",backgroundSize:"contain",opacity:1}),t.paginationPicture={backgroundImage:"url(static/themetypeui/pagination.png)",backgroundSize:"100% 100%",backgroundRepeat:"no-repeat"},t.leftTriangle_style={backgroundImage:"url("+t.globalStatic+"/sanjiao.png)",backgroundSize:"100% 100%",backgroundRepeat:"no-repeat",transform:"scaleX(-1)"},t.rightTriangle_style={backgroundImage:"url("+t.globalStatic+"/sanjiao.png)",backgroundSize:"100% 100%",backgroundRepeat:"no-repeat"},xe=new Swiper("#paginationdiy",{direction:"horizontal",slidesPerView:5,slidesPerGroup:4,resistanceRatio:0,on:{sliderMove:function(e){k.hand.css({left:e.pageX,top:e.pageY})},touchEnd:function(){k.hand&&k.setStepAnimation(0)},touchStart:function(){k.hand&&k.setStepAnimation(1)},init:function(){this.update()}}}),be=new Swiper("#swiperContainerMain",{direction:"horizontal",centeredSlides:!0,slidesPerView:1.3,spcaeBetween:15,touchEventsTarget:"wrapper",navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},on:{sliderMove:function(e){k.hand.css({left:e.pageX,top:e.pageY})},slideChangeTransitionStart:function(){var e=this;Array.prototype.forEach.call(this.slides,function(n,a){e.slides.eq(a).removeClass("none-effect"),xe.slides.eq(a).find(".paginationballs").css({backgroundImage:"url("+t.globalStatic+"/pagiball1.png)",backgroundRepeat:"no-repeat",backgroundSize:"contain",color:"#539bc5"})}),xe.slides.eq(e.activeIndex).find(".paginationballs").css({backgroundImage:"url("+t.globalStatic+"/pagiball2.png)",backgroundRepeat:"no-repeat",backgroundSize:"contain",color:"white"}),xe.slideTo(e.activeIndex,1e3)},slideChange:function(){t.currentPage=this.activeIndex,this.activeIndex>=this.slides.length-1?(t.$refs.boyBtnArea.style.pointerEvents="auto",Ie.showBoy(),t.currentLessonCompleted=!0):(Ie.hideBoy(),t.$refs.boyBtnArea.style.pointerEvents="none"),Ie.stopAudios(),Ie.playAudios(),t.currentPaginationPages=this.realIndex},tap:function(){t.currentPage=this.activeIndex},touchStart:function(){k.hand&&k.setStepAnimation(1)},touchEnd:function(){k.hand&&k.setStepAnimation(0)},init:function(){this.slides.eq(this.activeIndex).addClass("none-effect"),setTimeout(function(){xe.slides.eq(0).find(".paginationballs").css({backgroundImage:"url("+t.globalStatic+"/pagiball2.png)",backgroundRepeat:"no-repeat",backgroundSize:"contain",color:"white"})},20),k.locked=!1;var e=setInterval(function(){Ie&&(Ie.playAudios(),clearInterval(e))},2);this.update()}}});for(var i=[],s=0;s<a.gameData.pictureList.length;s++){var o=a.gameData.pictureList[s].audioSrc,r=Pe+"_"+o.replace(/\./g,"_");o&&""!=_.trim(o)&&i.push({id:r,src:o})}function u(){var i=new Ce({json:a.gameData,app:e,resources:n,vueInstance:t,swiper:be});e.stage.addChild(i),Ie=i,x.setMaskShow(!1)}x.setMaskShow(!0,0),void 0==j.loadedStatus[Pe]&&i.length>0?j.addAudio(i,t.globalStatic+"/",function(){u.call(t)},Pe):u.call(t)}Pe=this.$route.meta.assetsUrl,t.globalStatic="static/"+Pe,t.axios.get(t.globalStatic+"/gameconfig.json").then(function(e){var a=e.data.assets.map(function(e,t){return{name:""+e.name,url:e.url}});t.slideLists=e.data.gameData.pictureList.map(function(n,a){return{slideName:"",styles:{backgroundImage:"url("+t.globalStatic+"/"+e.data.gameData.pictureList[a].picture+")",backgroundSize:"100% 100%",backgroundRepeat:"no-repeat"}}}),T.call(t,Pe,a,n)})}}),beforeCreate:function(){0==this.$store.state.lessonPartsList.length&&(this.$router.push("/"),window.location.reload())},beforeDestroy:function(){Ie&&(Ie.destroyed(),Ie.destroy())},destroyed:function(){be.destroy(!0,!0),xe.destroy(!0,!0)},mounted:function(){this.SET_LESSONCURRENTPAGEINDEX(Number(this.allLessonComponentsNames.indexOf(this.$route.name)))}},Ae={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"bg"}),e._v(" "),n("pixi-canvas",{on:{startGame:e.gameStart}}),e._v(" "),n("div",{staticClass:"swiper-container",attrs:{id:"swiperContainerMain"}},[n("div",{staticClass:"swiper-wrapper",attrs:{id:"swiperWrapperMain"},on:{mouseenter:function(t){e.swiperMainMouseEnter()},mouseleave:function(t){e.swiperMainMouseLeave()}}},e._l(e.slideLists,function(t,a){return n("div",{staticClass:"swiper-slide swiper-slide-main"},[n("div",{staticClass:"slideInnerPic",style:t.styles},[e._v("\n          "+e._s(t.slideName)+"\n        ")])])})),e._v(" "),n("div",{staticClass:"swiper-button-prev diyButtonPrev"}),e._v(" "),n("div",{staticClass:"swiper-button-next diyButtonNext"})]),e._v(" "),n("div",{ref:"paginationPic",staticClass:"paginationPicture",style:e.paginationPicture},[n("div",{staticClass:" swiper-container ",attrs:{id:"paginationdiy"}},[n("div",{staticClass:"swiper-wrapper swiper-wrapper-paginationdiv "},e._l(e.slideLists,function(t,a){return n("div",{staticClass:"swiper-slide swiper-slide-paginationdiy"},[n("div",{staticClass:"paginationballs",style:e.paginationballs_style,on:{mouseenter:function(t){e.paginationBallMouseEnter()},mouseleave:function(t){e.paginationBallMouseLeave()},click:function(t){e.paginationBallClick(a)}}},[e._v("\n            "+e._s(a+1)+"\n          ")])])}))]),e._v(" "),n("div",{staticClass:"pagi_triangles"},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.leftTriangleShow,expression:"leftTriangleShow"}],staticClass:"left",style:e.leftTriangle_style,on:{click:function(t){e.goPrevPagi()}}}),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.rightTriangleShow,expression:"rightTriangleShow"}],staticClass:"right",style:e.rightTriangle_style,on:{click:function(t){e.goNextPagi()}}})])]),e._v(" "),n("div",{ref:"boyBtnArea",staticClass:"boyBtnArea",on:{click:e.boyBtnAreaClicked}}),e._v(" "),n("div",{staticClass:"canvas2",style:e.canvas2Style},[n("pixi-canvas",{style:e.canvas2Style,on:{startGame:e.gameStart2}})],1),e._v(" "),n("transition",{on:{"before-enter":e.beforeEnter,enter:e.enter,leave:e.leave}},[e.showCongra?n("congraPopup",{attrs:{showType:e.popupType},on:{quitGame:function(t){e.quitGame()},continueGame:function(t){e.continueGame()},continueClicked:function(t){e.clickContinue()},againClicked:e.againClicked}}):e._e()],1)],1)},staticRenderFns:[]};var Me=n("VU/8")(Ee,Ae,!1,function(e){n("f1Uu")},"data-v-326121a2",null).exports,_e=function(e){function t(){S()(this,t);var e=R()(this,(t.__proto__||O()(t)).call(this));return e.bar=null,e.bgBar=null,e.barWidth=1,e.points=3,e.progressText=null,e.progressBall=null,e.barClothLight=null,e.currentProgress=0,e.on("added",e.initial,e),e}return $()(t,e),y()(t,[{key:"initial",value:function(){this.setBar.call(this,{points:3,width:200})}},{key:"hideProgressBall",value:function(){TweenMax.to(this.progressBall.getChildAt(0),.1,{alpha:0})}},{key:"showProgressBall",value:function(){TweenMax.to(this.progressBall.getChildAt(0),1,{alpha:1,delay:.4})}},{key:"hideProgress",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};TweenMax.to(this,.5,{y:1300,onComplete:function(){e()}})}},{key:"showProgress",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};TweenMax.to(this,.5,{y:1024,onComplete:function(){e()}})}},{key:"setBar",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.children.length>=1&&(this.removeAllListeners(),this.removeChildren());var t=e.width||300;this.points=e.points||3;var n=this.points;this.barWidth=t*n,this.bgBar=new PIXI.Sprite(PIXI.Texture.from("timeback_png")),this.bgBar.pivot.x=this.bgBar.width/2,this.bgBar.pivot.y=this.bgBar.height/2,this.bar=new PIXI.Graphics,this.bar.beginFill(5460819,0),this.bar.drawRoundedRect(0,-12,this.barWidth,30,15),this.bar.endFill();var a=new PIXI.Sprite(PIXI.Texture.from("timeline_png"));this.barClothLight=new PIXI.Sprite(PIXI.Texture.from("timepoint_png"));var i=new PIXI.Graphics;i.beginFill(16711680,1),i.drawRoundedRect(5,14,this.barWidth-6,26,14),i.endFill(),i.y=-28,i.pivot.x=0,i.x=-1*this.barWidth/2,this.bar.pivot.x=this.bar.width/2,this.bar.pivot.y=this.bar.height/2,this.bar.y=15,a.pivot.x=a.width/2,a.pivot.y=a.height/2,this.barClothLight.pivot.x=this.barClothLight.width,this.barClothLight.pivot.y=this.barClothLight.height/2,a.width=this.bar.width,a.height=this.bar.height,this.barClothLight.width=this.bar.width,this.barClothLight.height=this.bar.height,this.barClothLight.x=-1*this.barWidth/2+20+25,this.barClothLight.mask=i,this.addChild(this.bgBar),this.addChild(a),this.addChild(this.barClothLight),this.addChild(i),this.addChild(this.bar),this.progressBall=new PIXI.Sprite(PIXI.Texture.from("timekey_png"));var s=new PIXI.Graphics;s.beginFill(2812400),s.drawCircle(12.5,-6.5,25),s.endFill(),s.alpha=0,this.progressBall.pivot.y=this.progressBall.height/2+50,this.progressBall.pivot.x=this.progressBall.width/2,this.progressBall.x=25,this.progressText=new PIXI.Text(this.progress+"",{fontFamily:"Microsoft YaHei",fontSize:54,fontWeight:"bold",align:"center",fill:16777215}),this.progressText.pivot.x=this.progressText.width/2,this.progressText.pivot.y=this.progressText.height/2,this.progressText.x=58,this.progressText.y=42,this.progressBall.addChild(this.progressText),this.bar.addChild(this.progressBall)}},{key:"progress",set:function(e){this.currentProgress=e;var t=this.currentProgress/this.points*(this.barWidth-50)+25;TweenMax.to(this.progressBall,1,{x:t,delay:.4}),TweenMax.to(this.barClothLight,1,{x:t+(-1*this.barWidth/2+20),delay:.4}),this.progressText.text=this.currentProgress+1,Number(this.progressText.text)>=10&&(this.progressText.x=50)},get:function(){return this.currentProgress}}]),t}(PIXI.Container),Le=function(e){function t(e){S()(this,t);var n=R()(this,(t.__proto__||O()(t)).call(this));return n.gameConfig=e.json,n.app=e.app,n.ticker=e.ticker,n.resources=PIXI.loader.resources,n.vueInstance=e.vueInstance,n.rightAnswersArr=[3,1,0],n.gameLevel=0,n.gameLessonCompleted=!1,n.bearDefaultAn=null,n.picBand=null,n.progressBar=null,n.isAnimating=!1,n.soundButton=null,n.soundSpeakText=null,n.gameAudio=null,n.gameMenuBar=null,n.on("added",n.addedToStage,n),n}return $()(t,e),y()(t,[{key:"playAgain",value:function(){this.vueInstance.showCongra=!1,this.gameLevel=-1,this.progressBar.progress=0,this.progressBar.hideProgressBall(),this.goNextComing()}},{key:"playContinue",value:function(){this.vueInstance.gameHasBeenCompleted?b.call(this,!1):b.call(this,!0)}},{key:"goToHome",value:function(){var e=this;if(0==e.vueInstance.$route.meta.completed)e.vueInstance.popupType="shutback",e.vueInstance.showCongra=!0;else{setTimeout(function(){e.vueInstance.$router.push("/index/")},1e3),x.setMaskShow(!0);var t=e.vueInstance.$route.fullPath.split("/"),n=e.vueInstance.allPartNames.indexOf(t[2]);e.vueInstance.SET_INDEXPAGEINITIALSLIDE(Number(n))}}},{key:"rightCheck",value:function(e){var t=this;function n(){t.isAnimating=!1}t.isAnimating||(t.isAnimating=!0,t.gameLevel>=t.gameConfig.levels.length-1&&(t.gameLessonCompleted=!0),t.rightAnswersArr[t.gameLevel]==e?(t.picBand.questionBars.forEach(function(n,a){if(a!=e)n.getChildAt(0).closeDoor();else switch(n.getChildAt(0).highlighter.alpha=1,n.getChildAt(0).openDoor(),t.vueInstance.gameThemeType){case 1:n.getChildAt(0).myText.style.fill=16645264;break;case 2:n.getChildAt(0).myText.style.fill=12480256;break;case 3:n.getChildAt(0).myText.style.fill=2320951;break;case 4:n.getChildAt(0).myText.style.fill=810640;break;case 5:n.getChildAt(0).myText.style.fill=4868020;break;default:n.getChildAt(0).myText.style.fill=2320951}}),new Audio("static/sound/select_right.mp3").play(),setTimeout(function(){t.progressBar.showProgress(),t.progressBar.progress=t.gameLevel,setTimeout(function(){if(t.gameLevel>=t.gameConfig.levels.length-1)return t.vueInstance.$route.meta.completed=1,t.vueInstance.setOwnLessonComplete(),t.gameAudio&&t.soundButton.stop(),0==t.vueInstance.gameHasBeenCompleted&&window.parent.postMessage({type:"stepSubmit",page:t.vueInstance.lessonCurrentPageIndex},"*"),setTimeout(function(){var e=t.vueInstance.$route.name==t.vueInstance.restArrangementStat[t.vueInstance.restArrangementStat.length-1];e&&!t.vueInstance.gameHasBeenCompleted&&setTimeout(function(){t.gameMenuBar.bookScene.openEnergyCan(!1)},t.vueInstance.showPopupDelay),setTimeout(function(){if(t.vueInstance.alreadyHasOneCard){t.vueInstance.showCongra=!0;var n=new Audio("static/sound/win_jump.mp3");n.play()}else if(t.vueInstance.gameHasBeenCompleted&&!t.vueInstance.alreadyHasOneCard&&t.gameMenuBar.bookScene.openEnergyCan(!0),!t.vueInstance.gameHasBeenCompleted&&0==e){t.vueInstance.showCongra=!0;var a=new Audio("static/sound/win_jump.mp3");a.play()}},t.vueInstance.showPopupDelay),t.vueInstance.updateRestArrangementStat()},1),void t.progressBar.hideProgress();t.progressBar.hideProgress(function(){setTimeout(function(){TweenMax.to(t.picBand,.5,{x:t.picBand.x-2100}),setTimeout(function(){t.goNextComing.call(t)},500)},100)}.bind(t))},1500)},400)):(new Audio("static/sound/select_wrong.mp3").play(),t.picBand.questionBars.forEach(function(t,a){a==e&&t.getChildAt(0).wrrongClicked(n)})))}},{key:"goNextComing",value:function(){var e=this;e.gameLevel++,e.vueInstance.$emit("changeGameLevel",e.gameLevel);e.picBand.x=0,e.picBand.y=450,e.picBand.questionBars.forEach(function(e,t){e.getChildAt(0).openDoor()}),e.stopSpeakSound(),TweenMax.from(e.picBand,.5,{x:2100,onComplete:function(){e.isAnimating=!1,e.soundSpeakText.text=e.gameConfig.levels[e.gameLevel].content,e.soundSpeakText.pivot.y=e.soundSpeakText.height/2,e.soundSpeakText.text=e.gameConfig.levels[e.gameLevel].content,e.soundSpeakText.y=290,e.playSpeakSound(),e.checksTiGan.call(e)},onStart:function(){e.picBand.setPages(e.gameConfig.levels[e.gameLevel].cardlist.length,e.gameConfig.levels[e.gameLevel].cardlist)}}),e.picBand.questionBars.forEach(function(e,t){e.getChildAt(0).openDoor(),e.getChildAt(0).highlighter.alpha=0}),e.picBand.setPicture(e.resources[this.gameConfig.levels[e.gameLevel].cardpicture].texture)}},{key:"checksTiGan",value:function(){""==_.trim(this.gameConfig.levels[this.gameLevel].audioSrc)&&""!=_.trim(this.gameConfig.levels[this.gameLevel].content)?(this.soundButton.alpha=0,this.soundSpeakText.alpha=1,this.soundSpeakText.style.align="center",this.soundSpeakText.pivot.x=this.soundSpeakText.width/2,this.soundSpeakText.x=960,this.soundButton.x=410):""!=_.trim(this.gameConfig.levels[this.gameLevel].audioSrc)&&""==_.trim(this.gameConfig.levels[this.gameLevel].content)?(this.soundButton.alpha=1,this.soundSpeakText.alpha=0,this.soundSpeakText.x=620,this.soundButton.x=870,this.soundSpeakText.style.align="left",this.soundSpeakText.pivot.x=0):(this.soundButton.alpha=1,this.soundSpeakText.alpha=1,this.soundSpeakText.x=620,this.soundButton.x=410,this.soundSpeakText.style.align="left",this.soundSpeakText.pivot.x=0)}},{key:"goBackComing",value:function(){var e=this,t=this;if(!t.isAnimating&&0!=t.gameLevel){t.gameLevel--,t.vueInstance.$emit("changeGameLevel",t.gameLevel),t.progressBar.progress=t.gameLevel;t.stopSpeakSound(),TweenMax.to(t.picBand,.5,{x:t.picBand.x+2100,onStart:function(){t.isAnimating=!0,t.soundSpeakText.text=t.gameConfig.levels[t.gameLevel].content,t.soundSpeakText.pivot.y=t.soundSpeakText.height/2,t.soundSpeakText.text=t.gameConfig.levels[t.gameLevel].content,t.soundSpeakText.y=290,t.checksTiGan.call(t),t.picBand.setPages(t.gameConfig.levels[t.gameLevel].cardlist.length,t.gameConfig.levels[t.gameLevel].cardlist)}}),setTimeout(function(){t.picBand.x=0,t.picBand.y=450,TweenMax.from(t.picBand,.5,{x:-1750,onComplete:function(){t.isAnimating=!1,t.playSpeakSound()}}),t.picBand.questionBars.forEach(function(e,t){e.getChildAt(0).openDoor(),e.getChildAt(0).highlighter.alpha=0}),t.picBand.setPicture(t.resources[e.gameConfig.levels[t.gameLevel].cardpicture].texture)},500)}}},{key:"addedToStage",value:function(){var e,t=this,n=new PIXI.Sprite(PIXI.loader.resources.practicebg_jpg.texture);this.addChild(n),this.progressBar=new _e,t.picBand=new De,e=[],t.gameConfig.levels.forEach(function(t){e.push(t.rightAnswer-1)}),t.rightAnswersArr=e,t.picBand.setBarsClickEvent(function(e){0==t.gameLevel&&t.progressBar.showProgressBall(),t.rightCheck(e)});var a=new PIXI.Graphics;a.beginFill(16711680,.5),a.drawRect(0,450,1920,527),a.endFill(),this.addChild(t.picBand),this.addChild(a),t.picBand.mask=a,t.picBand.setPages(t.gameConfig.levels[t.gameLevel].cardlist.length,t.gameConfig.levels[t.gameLevel].cardlist),t.picBand.setPicture(t.resources[t.gameConfig.levels[t.gameLevel].cardpicture].texture),t.picBand.x=0,t.picBand.y=450,t.addChild(t.progressBar),t.progressBar.setBar({width:1e3/this.gameConfig.levels.length,points:this.gameConfig.levels.length-1}),t.progressBar.y=1300,t.progressBar.x=960,t.progressBar.pivot.x=0,t.progressBar.pivot.y=0,t.soundButton=new q,t.soundButton.resName="gamebtnSound_atlas",t.soundButton.alienImages=["gamesound0.png","gamesound1.png","gamesound2.png"],t.soundButton.interactive=!0,t.addChild(t.soundButton),t.soundButton.x=410,t.soundButton.y=209,t.soundButton.on("pointerdown",t.soundButtonTap,t),setTimeout(function(){t.playSpeakSound()},300),t.soundSpeakText=new PIXI.Text("",{fontFamily:"Microsoft YaHei",fontSize:50,fill:16777215,align:"left",wordWrap:!0,wordWrapWidth:2200}),t.addChild(t.soundSpeakText),t.soundSpeakText.pivot.y=t.soundSpeakText.height/2,t.soundSpeakText.text=t.gameConfig.levels[t.gameLevel].content,t.soundSpeakText.height>70?t.soundSpeakText.y=260:t.soundSpeakText.y=290,t.soundSpeakText.x=620,t.soundSpeakText.y=290,K.freeze=!1,K.instancement=null,t.gameMenuBar=new K,t.addChild(t.gameMenuBar),t.gameMenuBar.setBackBtn_tapHandler(function(){t.goBackComing()}),t.gameMenuBar.setHomeBtn_tapHandler(function(){t.goToHome()}),t.gameMenuBar.backBtnShow=!1,t.gameMenuBar.homeBtnShow=!0,t.gameMenuBar.bookBtnShow=!1,t.gameMenuBar.updateGameMenu(),t.vueInstance.$watch(function(){return t.vueInstance.energyCurrentNum},function(e){t.gameMenuBar.energy=e,t.gameMenuBar.playStars()}),this.gameMenuBar.energyOnce=t.vueInstance.energyCurrentNum,t.vueInstance.$watch(function(){return t.vueInstance.currentGameLevel},function(e){e>0?(t.gameMenuBar.homeBtnShow=!0,t.gameMenuBar.backBtnShow=!0,t.gameMenuBar.updateGameMenu()):(t.gameMenuBar.homeBtnShow=!0,t.gameMenuBar.backBtnShow=!1,t.gameMenuBar.updateGameMenu())}),this.checksTiGan.call(this)}},{key:"soundButtonTap",value:function(){"stoping"==this.soundButton.status?(this.soundButton.play(),this.playSpeakSound()):"playing"==this.soundButton.status&&(this.soundButton.stop(),this.stopSpeakSound())}},{key:"playSpeakSound",value:function(){var e=this;if(""!=_.trim(e.gameConfig.levels[e.gameLevel].audioSrc)){var t=this.vueInstance.$route.meta.assetsUrl+"_"+e.gameConfig.levels[e.gameLevel].audioSrc.replace(/\./g,"_");e.gameAudio=j.audios[t],e.gameAudio.play(),e.soundButton.play(),e.gameAudio.on("complete",function(){e.soundButton.stop()})}}},{key:"stopSpeakSound",value:function(){this.gameAudio&&(this.gameAudio.stop(),this.soundButton.stop())}},{key:"destroyed",value:function(){this.gameAudio&&this.gameAudio.stop(),this.gameMenuBar&&(this.gameMenuBar.clearGameMenuEvents(),this.gameMenuBar.destroy())}}]),t}(PIXI.Container),Ne=function(e){function t(){S()(this,t);var e=R()(this,(t.__proto__||O()(t)).call(this));return e.lowerDoor=null,e.upponDoor=null,e.myText=null,e.strContent="aaaS",e.highlighter=null,e.cardType=3,e.on("added",e.added_handler,e),e}return $()(t,e),y()(t,[{key:"setText",value:function(e){this.myText&&(this.myText.text=e),this.strContent=e}},{key:"setCardType",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3;this.cardType=e}},{key:"added_handler",value:function(){var e=new PIXI.Sprite(PIXI.Texture.from("textchoose_normal_png"));e.scale.y=1.8,this.addChild(e),this.myText=this._createText(),2==this.cardType?(this.lowerDoor=new PIXI.Sprite(PIXI.Texture.from("textchoose2_close1_png")),this.upponDoor=new PIXI.Sprite(PIXI.Texture.from("textchoose2_close2_png")),this.myText.x=40,this.myText.y=68):3==this.cardType&&(this.lowerDoor=new PIXI.Sprite(PIXI.Texture.from("textchoose1_close1_png")),this.upponDoor=new PIXI.Sprite(PIXI.Texture.from("textchoose1_close2_png")),this.myText.x=40,this.myText.y=38),this.upponDoor.y=0,this.lowerDoor.y=0,this.upponDoor.alpha=1,this.highlighter=new PIXI.Sprite(PIXI.Texture.from("textchoose_select_png")),this.highlighter.y=0,this.highlighter.x=-3,this.highlighter.scale.y=1.8,this.highlighter.scale.x=1,this.highlighter.alpha=0,this.addChild(this.highlighter),this.myText.text=this.strContent,this.addChild(this.myText),this.addChild(this.lowerDoor),this.addChild(this.upponDoor)}},{key:"_createText",value:function(){return new PIXI.Text("aaa",{fontFamily:"Microsoft YaHei",fontSize:45,fill:16777215,align:"left"})}},{key:"closeDoor",value:function(){3==this.cardType?(TweenMax.to(this.lowerDoor,.5,{y:21}),TweenMax.to(this.upponDoor,.5,{y:21})):2==this.cardType&&(TweenMax.to(this.lowerDoor,.5,{y:20}),TweenMax.to(this.upponDoor,.5,{y:20}))}},{key:"openDoor",value:function(){3==this.cardType?(this.upponDoor.y=-40,this.lowerDoor.y=105,this.upponDoor.x=-15,this.lowerDoor.x=-15):2==this.cardType&&(this.upponDoor.y=-60,this.lowerDoor.y=100,this.upponDoor.x=0,this.lowerDoor.x=0)}},{key:"wrrongClicked",value:function(e){var t=new TimelineMax({repeat:3,yoyo:!0,onComplete:function(){e()}});3==this.cardType?t.add([TweenMax.to(this.lowerDoor,.2,{y:18}),TweenMax.to(this.upponDoor,.2,{y:19})]):2==this.cardType&&t.add([TweenMax.to(this.lowerDoor,.2,{y:20}),TweenMax.to(this.upponDoor,.2,{y:20})])}}]),t}(PIXI.Container),De=function(e){function t(){S()(this,t);var e=R()(this,(t.__proto__||O()(t)).call(this));return e.on("added",e.added_handler,e),e.bg_sprite=null,e.innerPic_sprite=null,e.innerContainer=null,e.pages=2,e.leftDoor=null,e.rightDoor=null,e.picBand=null,e.questionBars=[],e.hightligtBars=[],e.questionTextInfoArr=["v","d"],e.barsClickEmit=null,e}return $()(t,e),y()(t,[{key:"setBarsClickEvent",value:function(e){this.barsClickEmit=e}},{key:"showCards",value:function(e){}},{key:"setPages",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["1","2","3"];function n(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:120;this.questionBars.length>0&&(this.questionBars.forEach(function(e){e.parent.removeChild(e)}),this.questionBars=[]);for(var a=0;a<this.pages;a++){var i=new PIXI.Container,s=new Ne;s.setCardType(e),s.setText(t[a]);var o=new PIXI.Graphics;o.beginFill(16711680),o.drawRect(0,-50,800,n),o.endFill(),i.addChild(s),i.addChild(o),s.mask=o,s.openDoor(),i.interactive=!0,this.questionBars&&this.innerContainer&&(this.questionBars.push(i),this.innerContainer.addChild(i)),i.on("pointerdown",this.barsClickEmit.bind(this,a),this)}}this.pages=e,2==this.pages&&this.picBand?(n.call(this,380),this.picBand.texture=PIXI.Texture.from("textchoose2_back_png"),this.questionBars[0].x=1133,this.questionBars[0].y=45,this.questionBars[1].x=this.questionBars[0].x+38,this.questionBars[1].y=this.questionBars[0].y+250):3==this.pages&&this.picBand&&(n.call(this,200),this.picBand.texture=PIXI.Texture.from("textchoose1_back_png"),this.questionBars[0].x=1130,this.questionBars[0].y=35,this.questionBars[1].x=this.questionBars[0].x+38,this.questionBars[1].y=this.questionBars[0].y+164,this.questionBars[2].x=this.questionBars[1].x+16,this.questionBars[2].y=this.questionBars[1].y+170)}},{key:"added_handler",value:function(){this.picBand=new PIXI.Sprite,this.innerContainer=new PIXI.Container;var e=new PIXI.Graphics;e.beginFill(16711680),e.drawRect(0,0,800,480),e.endFill(),e.x=150,e.y=22,this.innerPic_sprite=new PIXI.Sprite,this.innerContainer.addChild(this.innerPic_sprite),this.innerPic_sprite.x=120,this.innerPic_sprite.mask=e,this.innerContainer.addChild(e),this.addChild(this.innerContainer),this.addChild(this.picBand)}},{key:"setTextArr",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.questionTextInfoArr=e}},{key:"setPicture",value:function(e){this.innerPic_sprite.texture=e,this.innerPic_sprite.pivot.x=0,this.innerPic_sprite.pivot.y=0}}]),t}(PIXI.Container),Ge=Le,Xe=null,Oe=null,He={name:"module1",mixins:[I,C],data:function(){return{backShow:!1,homeShow:!0,currentGameLevel:0,showCongra:!1,popupType:"popup1"}},beforeCreate:function(){0==this.$store.state.lessonPartsList.length&&(this.$router.push("/"),window.location.reload())},computed:d()({},Object(v.c)(["lessonPartsList","alreadyHasOneCard","gameThemeType","allPartNames","assetsPages","assetsGameConfig","assetsResources","completedLessonNum","allLessonsNum","showPopupDelay","lessonPartsIndex","allLessonComponentsNames","restArrangementStat","energyCurrentNum","lessonCurrentPageIndex","gameHasBeenCompleted"])),components:{congraPopup:ve},methods:d()({},Object(v.b)(["SET_CANVASPAGE","SET_ASSETSPAGES","SET_INDEXPAGEINITIALSLIDE","SET_ASSETSRESOURCES","SET_ASSETSGAMECONFIG","PUSH_GAMES","SET_LESSONCOMPLETESTAT","SET_RESTARRANGEMENTSTAT","SET_LESSONCURRENTPAGEINDEX"]),{againClicked:function(){Xe&&Xe.playAgain()},clickContinue:function(){Xe&&Xe.playContinue()},quitGame:function(){var e=this;setTimeout(function(){e.$router.push("/index/")},1e3),x.setMaskShow(!0);var t=this.$route.fullPath.split("/"),n=e.allPartNames.indexOf(t[2]);e.SET_INDEXPAGEINITIALSLIDE(Number(n))},continueGame:function(){this.showCongra=!1},gameStart:function(e){var t=this;function n(n,a){for(var i=[],s=0;s<a.gameData.levels.length;s++){var o=a.gameData.levels[s].audioSrc,r=_.trim(o);if(""!=r){var u=Oe+"_"+r.replace(/\./g,"_");i.push({id:u,src:o})}}if(void 0==j.loadedStatus[Oe]&&i.length>0)j.addAudio(i,"static/"+Oe+"/",function(){var i=new Ge({json:a.gameData,app:e,ticker:e.ticker,resources:n,vueInstance:t});e.stage.addChild(i),Xe=i,x.setMaskShow(!1)},Oe);else{var l=new Ge({json:a.gameData,app:e,ticker:e.ticker,resources:n,vueInstance:t});e.stage.addChild(l),Xe=l,x.setMaskShow(!1)}}Oe=this.$route.meta.assetsUrl,t.axios.get("static/"+Oe+"/gameconfig.json").then(function(e){var a=e.data.assets.map(function(e,t){return{name:""+e.name,url:e.url}});T.call(t,Oe,a,n)}),x.setMaskShow(!0,0)}}),beforeDestroy:function(){Xe&&(Xe.destroyed(),Xe.destroy())},mounted:function(){var e=this;e.SET_LESSONCURRENTPAGEINDEX(Number(e.allLessonComponentsNames.indexOf(e.$route.name))),this.$on("changeGameLevel",function(t){e.currentGameLevel=t})}},Re={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"gameContainer"},[n("pixi-canvas",{on:{startGame:e.gameStart}}),e._v(" "),n("transition",{on:{"before-enter":e.beforeEnter,enter:e.enter,leave:e.leave}},[e.showCongra?n("congraPopup",{attrs:{showType:e.popupType},on:{quitGame:function(t){e.quitGame()},continueGame:function(t){e.continueGame()},continueClicked:function(t){e.clickContinue()},againClicked:e.againClicked}}):e._e()],1)],1)},staticRenderFns:[]};var Ue=n("VU/8")(He,Re,!1,function(e){n("K/gc")},"data-v-3148aa26",null).exports,$e=function(e){function t(e){S()(this,t);var n=R()(this,(t.__proto__||O()(t)).call(this));return n.gameConfig=e.json,n.app=e.app,n.ticker=e.ticker,n.resources=PIXI.loader.resources,n.vueInstance=e.vueInstance,n.rightAnswersArr=[1,1,1],n.gameLevel=0,n.btnsArr=[],n.bearDefaultAn=null,n.btnsContainer=null,n.progressBar=null,n.gameLessonCompleted=!1,n.isAnimating=!1,n.leftCtnPos=0,n.cardOffsetWidth=85,n.soundButton=null,n.soundSpeakText=null,n.gameAudio=null,n.gameMenuBar=null,n.on("added",n.addedToStage,n),n}return $()(t,e),y()(t,[{key:"playAgain",value:function(){this.vueInstance.showCongra=!1,this.gameLevel=-1,this.progressBar.progress=0,this.progressBar.hideProgressBall(),this.goNextComing()}},{key:"playContinue",value:function(){this.vueInstance.gameHasBeenCompleted?b.call(this,!1):b.call(this,!0)}},{key:"goToHome",value:function(){var e=this;if(0==e.vueInstance.$route.meta.completed)e.vueInstance.popupType="shutback",e.vueInstance.showCongra=!0;else{setTimeout(function(){e.vueInstance.$router.push("/index/")},1e3),x.setMaskShow(!0);var t=e.vueInstance.$route.fullPath.split("/"),n=e.vueInstance.allPartNames.indexOf(t[2]);e.vueInstance.SET_INDEXPAGEINITIALSLIDE(Number(n))}}},{key:"rightCheck",value:function(e){var t=this;t.isAnimating||(t.isAnimating=!0,t.gameLevel>=t.gameConfig.levels.length-1&&(t.gameLessonCompleted=!0),t.rightAnswersArr[t.gameLevel]==e?(t.btnsArr.forEach(function(t,n){n!=e?t.closeDoor():t.setClicked()}),new Audio("static/sound/select_right.mp3").play(),setTimeout(function(){t.progressBar.showProgress(),t.progressBar.progress=t.gameLevel,setTimeout(function(){if(t.gameLevel>=t.gameConfig.levels.length-1)return t.vueInstance.$route.meta.completed=1,t.vueInstance.setOwnLessonComplete(),t.gameAudio&&(t.gameAudio.stop(),t.soundButton.stop()),0==t.vueInstance.gameHasBeenCompleted&&window.parent.postMessage({type:"stepSubmit",page:t.vueInstance.lessonCurrentPageIndex},"*"),setTimeout(function(){var e=t.vueInstance.$route.name==t.vueInstance.restArrangementStat[t.vueInstance.restArrangementStat.length-1];e&&!t.vueInstance.gameHasBeenCompleted&&setTimeout(function(){t.gameMenuBar.bookScene.openEnergyCan(!1)},t.vueInstance.showPopupDelay),setTimeout(function(){if(t.vueInstance.alreadyHasOneCard){t.vueInstance.showCongra=!0;var n=new Audio("static/sound/win_jump.mp3");n.play()}else if(t.vueInstance.gameHasBeenCompleted&&!t.vueInstance.alreadyHasOneCard&&t.gameMenuBar.bookScene.openEnergyCan(!0),!t.vueInstance.gameHasBeenCompleted&&0==e){t.vueInstance.showCongra=!0;var a=new Audio("static/sound/win_jump.mp3");a.play()}},t.vueInstance.showPopupDelay),t.vueInstance.updateRestArrangementStat()},1),void t.progressBar.hideProgress();t.progressBar.hideProgress(function(){setTimeout(function(){p.TweenMax.to(t.btnsContainer,.5,{x:t.btnsContainer.x-1900}),setTimeout(function(){t.goNextComing.call(t)},500)},100)}.bind(t))},1500)},400)):(new Audio("static/sound/select_wrong.mp3").play(),t.btnsArr.forEach(function(n,a){if(a==e){var i=n.x,s=new p.TimelineMax({onComplete:function(){t.isAnimating=!1}});s.add(p.TweenMax.to(n,.08,{x:i-20})),s.add(p.TweenMax.to(n,.08,{x:i+15})),s.add(p.TweenMax.to(n,.1,{x:i-5})),s.add(p.TweenMax.to(n,.1,{x:i}))}})))}},{key:"goNextComing",value:function(){var e=this;e.gameLevel++,e.vueInstance.$emit("changeGameLevel",e.gameLevel);e.btnsContainer.x=960+e.btnsArr[0].width/2,e.stopSpeakSound(),p.TweenMax.from(e.btnsContainer,.5,{x:3e3,onComplete:function(){e.isAnimating=!1,e.soundSpeakText.text=e.gameConfig.levels[e.gameLevel].content,e.soundSpeakText.pivot.y=e.soundSpeakText.height/2,e.soundSpeakText.text=e.gameConfig.levels[e.gameLevel].content,e.soundSpeakText.y=290,e.playSpeakSound(),e.checksTiGan.call(e)},onStart:function(){e.arrangePicCards.call(e)}})}},{key:"checksTiGan",value:function(){""==_.trim(this.gameConfig.levels[this.gameLevel].audioSrc)&&""!=_.trim(this.gameConfig.levels[this.gameLevel].content)?(this.soundButton.alpha=0,this.soundSpeakText.alpha=1,this.soundSpeakText.style.align="center",this.soundSpeakText.pivot.x=this.soundSpeakText.width/2,this.soundSpeakText.x=960,this.soundButton.x=410):""!=_.trim(this.gameConfig.levels[this.gameLevel].audioSrc)&&""==_.trim(this.gameConfig.levels[this.gameLevel].content)?(this.soundButton.alpha=1,this.soundSpeakText.alpha=0,this.soundSpeakText.style.align="left",this.soundSpeakText.pivot.x=0,this.soundSpeakText.x=620,this.soundButton.x=870):(this.soundButton.alpha=1,this.soundSpeakText.alpha=1,this.soundSpeakText.style.align="left",this.soundSpeakText.pivot.x=0,this.soundSpeakText.x=620,this.soundButton.x=410)}},{key:"goBackComing",value:function(){var e=this;if(!e.isAnimating&&0!=e.gameLevel){e.gameLevel--,e.vueInstance.$emit("changeGameLevel",e.gameLevel),e.progressBar.progress=e.gameLevel;e.stopSpeakSound(),p.TweenMax.to(e.btnsContainer,.5,{x:e.btnsContainer.x+1900,onStart:function(){e.isAnimating=!0,e.soundSpeakText.text=e.gameConfig.levels[e.gameLevel].content,e.soundSpeakText.pivot.y=e.soundSpeakText.height/2,e.soundSpeakText.y=290,e.checksTiGan.call(e),e.arrangePicCards.call(e)},onComplete:function(){}}),setTimeout(function(){e.btnsContainer.x=960+e.btnsArr[0].width/2,p.TweenMax.from(e.btnsContainer,.5,{x:-800,onComplete:function(){e.isAnimating=!1,e.playSpeakSound()}})},500)}}},{key:"arrangePicCards",value:function(){this.btnsArr.length>0&&(this.btnsArr.forEach(function(e){e.destroy()}),this.btnsArr=[]);for(var e=this.gameConfig.levels[this.gameLevel].cardlist.length,t=0;t<e;t++){var n=new Fe;this.btnsContainer.addChild(n),n.setPicture(this.resources[this.gameConfig.levels[this.gameLevel].cardlist[t]].texture),2==e?n.x=t*(n.width+(this.cardOffsetWidth+100)):e>=3&&(n.x=t*(n.width+this.cardOffsetWidth)),this.btnsArr.push(n),n.interactive=!0,n.on("pointerdown",this.cardClickHander.bind(this,t))}this.btnsContainer.pivot.x=this.btnsContainer.width/2,this.btnsContainer.x=960+this.btnsArr[0].width/2,this.btnsContainer.y=720}},{key:"addedToStage",value:function(){var e,t=this,n=this,a=new PIXI.Sprite(PIXI.loader.resources.practicebg_jpg.texture);this.addChild(a),this.progressBar=new _e,n.btnsContainer=new PIXI.Container,e=[],n.gameConfig.levels.forEach(function(t){e.push(t.rightAnswer-1)}),n.rightAnswersArr=e,n.arrangePicCards.call(n),n.addChild(n.btnsContainer),n.addChild(n.progressBar),n.progressBar.setBar({width:1e3/this.gameConfig.levels.length,points:this.gameConfig.levels.length-1}),n.progressBar.y=1300,n.progressBar.x=960,n.progressBar.pivot.x=0,n.progressBar.pivot.y=0,n.soundButton=new q,n.soundButton.resName="gamebtnSound_atlas",n.soundButton.alienImages=["gamesound0.png","gamesound1.png","gamesound2.png"],n.soundButton.interactive=!0,n.addChild(n.soundButton),n.soundButton.x=410,n.soundButton.y=209,n.soundButton.on("pointertap",n.soundButtonTap,n),setTimeout(function(){n.playSpeakSound()},300),n.soundSpeakText=new PIXI.Text("",{fontFamily:"Microsoft YaHei",fontSize:50,fill:16777215,align:"left",wordWrap:!0,wordWrapWidth:2200}),n.addChild(n.soundSpeakText),n.soundSpeakText.pivot.y=n.soundSpeakText.height/2,n.soundSpeakText.text=n.gameConfig.levels[n.gameLevel].content,n.soundSpeakText.x=620,n.soundSpeakText.height>70?n.soundSpeakText.y=260:n.soundSpeakText.y=290,K.freeze=!1,n.gameMenuBar=new K,n.addChild(n.gameMenuBar),n.gameMenuBar.setBackBtn_tapHandler(function(){n.goBackComing()}),n.gameMenuBar.setHomeBtn_tapHandler(function(){n.goToHome()}),n.gameMenuBar.backBtnShow=!1,n.gameMenuBar.homeBtnShow=!0,n.gameMenuBar.bookBtnShow=!1,n.gameMenuBar.updateGameMenu(),n.vueInstance.$watch(function(){return n.vueInstance.energyCurrentNum},function(e){t.gameMenuBar.energy=e,t.gameMenuBar.playStars()}),n.vueInstance.$watch(function(){return n.vueInstance.currentGameLevel},function(e){e>0?(n.gameMenuBar.backBtnShow=!0,n.gameMenuBar.homeBtnShow=!0):(n.gameMenuBar.backBtnShow=!1,n.gameMenuBar.homeBtnShow=!0),n.gameMenuBar.updateGameMenu()}),this.gameMenuBar.energyOnce=n.vueInstance.energyCurrentNum,this.checksTiGan.call(this)}},{key:"soundButtonTap",value:function(){"stoping"==this.soundButton.status?(this.soundButton.play(),this.playSpeakSound()):"playing"==this.soundButton.status&&(this.soundButton.stop(),this.stopSpeakSound())}},{key:"playSpeakSound",value:function(){var e=this;if(""!=_.trim(e.gameConfig.levels[e.gameLevel].audioSrc)){var t=this.vueInstance.$route.meta.assetsUrl+"_"+e.gameConfig.levels[e.gameLevel].audioSrc.replace(/\./g,"_");e.gameAudio=j.audios[t],e.gameAudio.play(),e.soundButton.play(),e.gameAudio.on("complete",function(){e.soundButton.stop()})}}},{key:"stopSpeakSound",value:function(){this.gameAudio&&(this.gameAudio.stop(),this.soundButton.stop())}},{key:"cardClickHander",value:function(e,t){0==this.gameLevel&&this.progressBar.showProgressBall(),this.rightCheck(e)}},{key:"destroyed",value:function(){this.gameAudio&&this.gameAudio.stop(),this.gameMenuBar&&(this.gameMenuBar.clearGameMenuEvents(),this.gameMenuBar.destroy())}}]),t}(PIXI.Container),Fe=function(e){function t(){S()(this,t);var e=R()(this,(t.__proto__||O()(t)).call(this));return e.on("added",e.added_handler,e),e.bg_sprite=null,e.innerPic_sprite=null,e.innerContainer=null,e.leftDoor=null,e.rightDoor=null,e}return $()(t,e),y()(t,[{key:"added_handler",value:function(){this.leftDoor=new PIXI.Sprite(PIXI.Texture.from("cardchoose_doorL")),this.rightDoor=new PIXI.Sprite(PIXI.Texture.from("cardchoose_doorR")),this.leftDoor.pivot.x=this.leftDoor.width/2-1,this.rightDoor.pivot.x=this.rightDoor.width/2+1,this.leftDoor.pivot.y=this.leftDoor.height/2,this.rightDoor.pivot.y=this.rightDoor.height/2,this.bg_sprite=new PIXI.Sprite(PIXI.Texture.from("cardchoose_normal")),this.bg_sprite.pivot.x=this.bg_sprite.width/2,this.bg_sprite.pivot.y=this.bg_sprite.height/2,this.leftDoor.alpha=this.rightDoor.alpha=0;var e=new PIXI.Graphics;e.beginFill(65280),e.drawRect(0,0,this.bg_sprite.width-40,this.bg_sprite.height-40),e.endFill(),e.pivot.x=e.width/2,e.pivot.y=e.height/2,this.addChild(e),this.innerContainer=new PIXI.Container,this.innerPic_sprite=new PIXI.Sprite,this.innerContainer.addChild(this.innerPic_sprite),this.innerContainer.addChild(this.leftDoor),this.innerContainer.addChild(this.rightDoor),this.innerContainer.mask=e,this.addChild(this.innerContainer),this.addChild(this.bg_sprite)}},{key:"setPicture",value:function(e){this.innerPic_sprite.texture=e,this.innerPic_sprite.pivot.x=this.innerPic_sprite.width/2,this.innerPic_sprite.pivot.y=this.innerPic_sprite.height/2}},{key:"setClicked",value:function(){this.bg_sprite.texture=PIXI.Texture.from("cardchoose_select")}},{key:"setNormal",value:function(){this.bg_sprite.texture=PIXI.Texture.from("cardchoose_normal")}},{key:"closeDoor",value:function(){p.TweenMax.to([this.leftDoor,this.rightDoor],0,{alpha:1}),p.TweenMax.from(this.rightDoor,.6,{x:"+=300"}),p.TweenMax.from(this.leftDoor,.6,{x:"-=300"})}},{key:"openDoor",value:function(){p.TweenMax.to([this.leftDoor,this.rightDoor],0,{alpha:0})}}]),t}(PIXI.Container),je=$e,qe=null,ze=null,We={name:"module2",mixins:[I,C],data:function(){return{backShow:!1,homeShow:!0,currentGameLevel:0,showCongra:!1,popupType:"popup1"}},beforeCreate:function(){0==this.$store.state.lessonPartsList.length&&(this.$router.push("/"),window.location.reload())},computed:d()({},Object(v.c)(["lessonPartsIndex","alreadyHasOneCard","showPopupDelay","allPartNames","lessonPartsList","assetsPages","assetsGameConfig","assetsResources","completedLessonNum","allLessonsNum","allLessonComponentsNames","restArrangementStat","energyCurrentNum","lessonCurrentPageIndex","gameHasBeenCompleted"])),components:{congraPopup:ve},methods:d()({},Object(v.b)(["SET_CANVASPAGE","SET_INDEXPAGEINITIALSLIDE","SET_ASSETSPAGES","SET_ASSETSRESOURCES","SET_ASSETSGAMECONFIG","PUSH_GAMES","SET_LESSONCOMPLETESTAT","SET_RESTARRANGEMENTSTAT","SET_LESSONCURRENTPAGEINDEX"]),{againClicked:function(){qe&&qe.playAgain()},clickContinue:function(){qe&&qe.playContinue()},quitGame:function(){var e=this;setTimeout(function(){e.$router.push("/index/")},1e3),x.setMaskShow(!0);var t=this.$route.fullPath.split("/"),n=e.allPartNames.indexOf(t[2]);e.SET_INDEXPAGEINITIALSLIDE(Number(n))},continueGame:function(){this.showCongra=!1},gameStart:function(e){var t=this;new PIXI.loaders.Loader;function n(n,a){for(var i=[],s=0;s<a.gameData.levels.length;s++){var o=a.gameData.levels[s].audioSrc,r=_.trim(o);if(""!=r){var u=ze+"_"+r.replace(/\./g,"_");i.push({id:u,src:o})}}if(void 0==j.loadedStatus[ze]&&i.length>0)j.addAudio(i,"static/"+ze+"/",function(){var i=new je({json:a.gameData,app:e,ticker:e.ticker,resources:n,vueInstance:t});e.stage.addChild(i),qe=i,x.setMaskShow(!1)},ze);else{var l=new je({json:a.gameData,app:e,ticker:e.ticker,resources:n,vueInstance:t});e.stage.addChild(l),qe=l,x.setMaskShow(!1)}}ze=this.$route.meta.assetsUrl,t.axios.get("static/"+ze+"/gameconfig.json").then(function(e){var a=e.data.assets.map(function(e,t){return{name:""+e.name,url:e.url}});T.call(t,ze,a,n)}),x.setMaskShow(!0,0)}}),beforeDestroy:function(){qe&&(qe.destroyed(),qe.destroy())},mounted:function(){var e=this;e.SET_LESSONCURRENTPAGEINDEX(Number(e.allLessonComponentsNames.indexOf(e.$route.name))),this.$on("changeGameLevel",function(t){e.currentGameLevel=t})}},Ye={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"gameContainer"},[n("pixi-canvas",{on:{startGame:e.gameStart}}),e._v(" "),n("transition",{on:{"before-enter":e.beforeEnter,enter:e.enter,leave:e.leave}},[e.showCongra?n("congraPopup",{attrs:{showType:e.popupType},on:{quitGame:function(t){e.quitGame()},continueGame:function(t){e.continueGame()},continueClicked:function(t){e.clickContinue()},againClicked:e.againClicked}}):e._e()],1)],1)},staticRenderFns:[]};var Ke=n("VU/8")(We,Ye,!1,function(e){n("eMZf")},"data-v-fde67b80",null).exports,Ve=(function(){function e(){S()(this,e),this.hitArea=null,this.startDrag=!1,this.touchesPos=[],this.intervalTimer=null,this.touchTimes=0,this.touchToLeft=function(){},this.touchToRight=function(){}}y()(e,[{key:"swiperTouch",value:function(){this.hitArea&&(this.hitArea.on("pointerdown",this.touchStartHandler.bind(this)),this.hitArea.on("pointermove",this.touchMovingHandler.bind(this)),this.hitArea.on("pointerup",this.touchUpHandler.bind(this)),this.hitArea.on("pointerupoutside",this.touchUpHandler.bind(this)))}},{key:"touchUpHandler",value:function(e){this.startDrag=!1,this.intervalTimer&&clearInterval(this.intervalTimer),this.touchTimes<=80&&this.touchesPos.length>2&&(this.touchesPos[this.touchesPos.length-1]>this.touchesPos[this.touchesPos.length-2]?this.touchToRight():this.touchToLeft()),this.touchTimes=0,this.touchesPos=[]}},{key:"touchMovingHandler",value:function(e){this.startDrag&&(this.touchesPos.length>3&&this.touchesPos.shift(),this.touchesPos.push(e.data.global.x))}},{key:"touchStartHandler",value:function(e){var t=this;this.startDrag=!0,this.intervalTimer=setInterval(function(){t.touchTimes++},10)}}])}(),function(e){function t(e){S()(this,t);var n=R()(this,(t.__proto__||O()(t)).call(this));return n.gameConfig=e.json,n.resources=PIXI.loader.resources,n.vueInstance=e.vueInstance,n.book=null,n.pageturn=null,n.pageturn2=null,n.leftBtn=null,n.rightBtn=null,n.pageMaskUpper=null,n.pageMaskDown=null,n.pageUpper=null,n.pageDown=null,n.currentPage=0,n.turnAnimating=!1,n.boySpine=null,n.boyCanClicked=!1,n.boyIsShownTimes=0,n.gameAudio=null,n.coverPageTl=null,n.coverPageTl_reserve=null,n.isCoverPageTime=!0,n.isCoverPageTime_reserve=!1,n.myAn_pageTurns=null,n.gameMenuBar=null,n.currentAudioPlaying=!1,n.on("added",n.addedToStage,n),n}return $()(t,e),y()(t,[{key:"addedToStage",value:function(){var e=this,t=new PIXI.Sprite(PIXI.loader.resources.backbg_jpg.texture);this.addChild(t),setTimeout(function(){e.playAudios()},300),this.interactive=!0,this.pageUpper=new PIXI.Sprite(PIXI.Texture.from(this.gameConfig.levels[0].picture)),this.pageDown=new PIXI.Sprite(PIXI.Texture.from(this.gameConfig.levels[1].picture));var n=new PIXI.Sprite(PIXI.Texture.from("mybooks_png"));n.pivot.x=n.width/2,n.pivot.y=n.height/2,n.x=960,n.y=610;var a=new PIXI.Sprite(PIXI.Texture.from("mybooks_png"));this.book=n,a.pivot.x=a.width/2,a.pivot.y=a.height/2,a.x=960,a.y=610;var i=new PIXI.Graphics;i.beginFill(65280),i.drawRect(10,-75,a.width+20,a.height+65),i.endFill(),i.x=220,i.y=215,this.addChild(i),a.mask=i,this.leftBtn=new PIXI.Sprite(PIXI.Texture.from("leftbtn_png")),this.rightBtn=new PIXI.Sprite(PIXI.Texture.from("rightbtn_png")),this.leftBtn.x=50,this.leftBtn.y=870,this.rightBtn.x=1780,this.rightBtn.y=870,this.leftBtn.interactive=this.rightBtn.interactive=!0;function s(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this,n=new PIXI.Container,a=new PIXI.Sprite(PIXI.loader.resources.pagefengmian.texture),i=new TimelineMax({onComplete:function(){}});return e?(a.x=0,a.y=0,a.pivot.x=0,a.pivot.y=a.height/2,n.addChild(a),n.pivot.x=0,n.x=193,n.y=604,i.add([p.TweenMax.to(n.skew,1,{y:-3.16,onStart:function(){a.texture=PIXI.Texture.from("pagefengmian"),t.isCoverPageTime=!1,t.isCoverPageTime_reserve=!0,t.playAudios()}}),p.TweenMax.to(a,.28,{width:.5*a.width,onComplete:function(){p.TweenMax.to(a,.1,{width:1*a.width}),a.texture=PIXI.Texture.from("pagebeimian")},onStart:function(){a.texture=PIXI.Texture.from("pagefengmian")}})]),i.add(p.TweenMax.to(n,.3,{alpha:0,onComplete:function(){a.texture=PIXI.Texture.from("pagebeimian"),t.isCoverPageTime=!1}}),"-=.4")):(a.x=0,a.y=0,a.pivot.x=0,a.pivot.y=a.height/2,n.addChild(a),n.pivot.x=0,n.x=193,n.y=604,n.alpha=0,i.add(p.TweenMax.to(n,.4,{alpha:1})),i.add([p.TweenMax.from(n.skew,1,{y:-3.16,onStart:function(){a.texture=PIXI.Texture.from("pagebeimian"),t.isCoverPageTime_reserve=!1,t.isCoverPageTime=!0,t.playAudios()},onComplete:function(){}}),p.TweenMax.from(a,.28,{width:.5*a.width,onComplete:function(){p.TweenMax.to(a,.1,{width:1*a.width}),a.texture=PIXI.Texture.from("pagefengmian")},onStart:function(){a.texture=PIXI.Texture.from("pagebeimian")}})],"-=0.469")),i.stop(),this.addChild(n),{tl:i,coverPage:n}}this.myAn_pageTurns=new z("pageturns_atlas"),this.pageturn=this.myAn_pageTurns.create(),this.pageturn.animationSpeed=.08,this.pageturn.play();var o=new PIXI.Sprite(PIXI.loader.resources.pageturn2_png.texture);this.pageturn.pivot.x=this.pageturn.width,o.pivot.x=o.width,this.pageturn.y=490,this.pageturn.x=this.book.width-24.5,o.x=this.pageturn.x+20,this.pageturn2=o,o.y=-62,this.addChild(n),this.addChild(a),this.gameConfig.showCoverpage&&(this.coverPageTl=s.call(e,!0),this.coverPageTl_reserve=s.call(e,!1)),this.pageMaskUpper=new PIXI.Graphics,this.pageMaskUpper.beginFill(16711680),this.pageMaskUpper.drawRect(0,0,n.width,n.height),this.pageMaskUpper.endFill(),this.pageMaskUpper.pivot.x=this.pageMaskUpper.width,this.pageMaskUpper.x=0,this.pageMaskDown=this.pageMaskUpper.clone(),this.pageMaskDown.pivot.x=this.pageMaskDown.width,this.pageMaskDown.x=this.book.width-28-80,a.addChild(this.pageMaskDown),a.addChild(this.pageMaskUpper),this.pageDown.pivot.x=this.pageDown.width/2,this.pageDown.pivot.y=this.pageDown.height/2,this.pageDown.x=812,this.pageDown.y=392;var r=new PIXI.Graphics;r.beginFill(16775132,1),r.drawRect(100,25,n.width-160,n.height-60),r.endFill();var u=r.clone();r.addChild(this.pageUpper),u.addChild(this.pageDown),a.addChild(u),a.addChild(r),this.pageUpper.pivot.x=this.pageUpper.width/2,this.pageUpper.pivot.y=this.pageUpper.height/2,this.pageUpper.x=812,this.pageUpper.y=392,r.mask=this.pageMaskUpper,u.mask=this.pageMaskDown,a.addChild(this.pageturn),a.addChild(o),this.addChild(this.leftBtn),this.addChild(this.rightBtn),this.leftBtn.alpha=0,e.pageturn.alpha=1,e.pageturn2.alpha=0,this.leftBtn.on("pointerdown",this.turnPrev.bind(this,.5)),this.rightBtn.on("pointerdown",this.turnNext.bind(this,.5));var l=new F({swiperContainer:e,swiperArea:{x:200,width:1720,y:100,height:1e3}});l.setMoveLeftCallBack(function(){e.turnNext.call(e,.5)}),l.setMoveRightCallBack(function(){e.turnPrev.call(e,.5)}),this.pageDown.texture=PIXI.Texture.from(this.gameConfig.levels[this.currentPage].picture);var h=e.resources.boyskeleton.spineData;this.boySpine=new PIXI.spine.Spine(h),this.boySpine.scale.x=this.boySpine.scale.y=.55,this.boySpine.x=1920+this.boySpine.width+200,this.boySpine.y=690,this.boySpine.skeleton.setSkinByName("boy3"),this.boySpine.skeleton.setSlotsToSetupPose(),this.boySpine.state.setAnimation(0,"next",!0),this.boySpine.alpha=1,this.boySpine.interactive=!0,this.boySpine.on("pointerdown",function(){e.boyCanClicked&&(e.vueInstance.$route.meta.completed=1,e.vueInstance.setOwnLessonComplete(),e.gameAudio&&e.stopAudios(),0==e.vueInstance.gameHasBeenCompleted&&window.parent.postMessage({type:"stepSubmit",page:e.vueInstance.lessonCurrentPageIndex},"*"),setTimeout(function(){var t=e.vueInstance.$route.name==e.vueInstance.restArrangementStat[e.vueInstance.restArrangementStat.length-1];t&&!e.vueInstance.gameHasBeenCompleted&&setTimeout(function(){e.gameMenuBar.bookScene.openEnergyCan(!1)},e.vueInstance.showPopupDelay),setTimeout(function(){if(e.vueInstance.alreadyHasOneCard)return e.vueInstance.showCongra=!0,void new Audio("static/sound/win_jump.mp3").play();(e.vueInstance.gameHasBeenCompleted&&!e.vueInstance.alreadyHasOneCard&&e.gameMenuBar.bookScene.openEnergyCan(!0),e.vueInstance.gameHasBeenCompleted||0!=t)||(e.vueInstance.showCongra=!0,new Audio("static/sound/win_jump.mp3").play())},e.vueInstance.showPopupDelay),e.vueInstance.updateRestArrangementStat()},1))}),e.addChild(this.boySpine),K.freeze=!1,K.instancement=null,e.gameMenuBar=new K,e.addChild(e.gameMenuBar),e.gameMenuBar.setBackBtn_tapHandler(function(){e.turnPrev(.5)}),e.gameMenuBar.setHomeBtn_tapHandler(function(){e.gotoHome()}),e.gameMenuBar.setSoundBtn_tapHandler(function(t){"playing"==t.currentTarget.status?e.stopAudios.call(e):e.playAudios.call(e)}),e.gameMenuBar.backBtnShow=!1,e.gameMenuBar.homeBtnShow=!0,e.gameMenuBar.bookBtnShow=!1,e.gameMenuBar.soundBtnShow=!0,e.gameMenuBar.updateGameMenu(),e.vueInstance.$watch(function(){return e.vueInstance.energyCurrentNum},function(t){e.gameMenuBar.energy=t}),e.gameConfig.showCoverpage?e.vueInstance.$watch(function(){return e.vueInstance.currentGameLevel},function(t){t>=0?(e.gameMenuBar.backBtnShow=!0,e.gameMenuBar.homeBtnShow=!0,e.gameMenuBar.updateGameMenu()):(e.gameMenuBar.backBtnShow=!1,e.gameMenuBar.homeBtnShow=!0,e.gameMenuBar.updateGameMenu())}):e.vueInstance.$watch(function(){return e.vueInstance.currentGameLevel},function(t){t>0?(e.gameMenuBar.backBtnShow=!0,e.gameMenuBar.homeBtnShow=!0,e.gameMenuBar.updateGameMenu()):(e.gameMenuBar.backBtnShow=!1,e.gameMenuBar.homeBtnShow=!0,e.gameMenuBar.updateGameMenu())}),this.gameMenuBar.energyOnce=e.vueInstance.energyCurrentNum}},{key:"destroyed",value:function(){this.gameAudio&&(this.gameAudio.stop(),this.gameAudio=null,this.boySpine=null),this.gameMenuBar&&(this.gameMenuBar.clearGameMenuEvents(),this.gameMenuBar.destroy())}},{key:"hideBoy",value:function(){var e=this;this.boySpine&&p.TweenMax.to(this.boySpine,.8,{x:2500,ease:p.Back.easeInOut,alpha:0,onStart:function(){e.boyCanClicked=!1}})}},{key:"showBoy",value:function(){var e=this;this.boySpine&&(this.boySpine.alpha=1,this.boySpine.x=1800,p.TweenMax.to(this.boySpine,0,{x:2500}),p.TweenMax.to(this.boySpine,.8,{x:1910,ease:p.Back.easeInOut,onComplete:function(){e.boyCanClicked=!0}})),new Audio("static/sound/nextpart.mp3").play()}},{key:"gameTryAgain",value:function(){this.currentPage=1,this.turnPrev(0),this.playAudios()}},{key:"playAudios",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this;t.stopAudios();var n=e||this.currentPage,a=void 0;if(a=1==this.gameConfig.showCoverpage&&this.isCoverPageTime&&""!=_.trim(this.gameConfig.coverpageAudio)?this.vueInstance.$route.meta.assetsUrl+"_"+this.gameConfig.coverpageAudio.replace(/\./g,"_"):this.vueInstance.$route.meta.assetsUrl+"_"+this.gameConfig.levels[n].audioSrc.replace(/\./g,"_"),this.gameConfig.levels[n].audioSrc&&""!=_.trim(this.gameConfig.levels[n].audioSrc)||1==this.gameConfig.showCoverpage&&this.isCoverPageTime&&""!=_.trim(this.gameConfig.coverpageAudio)){this.gameAudio=j.audios[a],this.gameAudio.play(),this.gameAudio.position=0;this.gameAudio.duration;t.gameAudio.on("complete",function(){t.gameMenuBar.soundBtn&&t.gameMenuBar.soundBtn.stop()}),this.gameMenuBar.soundBtn&&this.gameMenuBar.soundBtn.play(),this.gameMenuBar.soundBtnShow=!0,this.gameMenuBar.updateGameMenu()}else this.gameMenuBar.soundBtnShow=!1,this.gameMenuBar.updateGameMenu()}},{key:"stopAudios",value:function(){this.gameAudio&&(this.gameAudio.stop(),this.gameMenuBar.soundBtn&&this.gameMenuBar.soundBtn.stop())}},{key:"gotoHome",value:function(){var e=this;if(0==this.vueInstance.$route.meta.completed)this.vueInstance.popupType="shutback",this.vueInstance.showCongra=!0;else{setTimeout(function(){e.vueInstance.$router.push("/index/")},1e3),x.setMaskShow(!0);var t=e.vueInstance.$route.fullPath.split("/"),n=e.vueInstance.allPartNames.indexOf(t[2]);e.vueInstance.SET_INDEXPAGEINITIALSLIDE(Number(n))}}},{key:"turnNext",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=this;if(this.isCoverPageTime&&this.gameConfig.showCoverpage)return this.coverPageTl.tl.restart(),this.coverPageTl.coverPage.alpha=1,this.coverPageTl_reserve.coverPage.alpha=0,this.leftBtn.alpha=1,void(this.gameConfig.showCoverpage&&(t.gameMenuBar.backBtnShow=!0,t.gameMenuBar.updateGameMenu()));if(this.currentPage>=this.gameConfig.levels.length-2&&(t.rightBtn.alpha=0,0==t.boyIsShownTimes&&(t.showBoy(),t.vueInstance.currentLessonCompleted=!0),t.boyIsShownTimes++),this.currentPage>=0&&(t.leftBtn.alpha=1),!(this.currentPage>=this.gameConfig.levels.length-1||this.turnAnimating)){this.turnAnimating=!0,this.currentPage++,t.pageturn.alpha=0,t.pageturn.gotoAndStop(0);var n=this.book.width-140;p.TweenMax.to(this.pageturn2,0,{x:n}),p.TweenMax.to(this.pageMaskUpper,0,{x:this.book.width-160}),p.TweenMax.to(this.pageturn2,e,{x:380,onStart:function(){t.pageturn2.alpha=1}}),p.TweenMax.to(this.pageMaskUpper,e,{x:246,onComplete:function(){t.pageturn2.alpha=0,1==t.vueInstance.currentLessonCompleted?t.pageturn.alpha=0:t.pageturn.alpha=1,t.turnAnimating=!1,t.pageMaskUpper.x=126,t.playAudios(),t.pageturn.play()}}),this.pageUpper.texture=PIXI.Texture.from(this.gameConfig.levels[this.currentPage-1].picture),this.pageDown.texture=PIXI.Texture.from(this.gameConfig.levels[this.currentPage].picture),t.vueInstance.$emit("changeGameLevel",t.currentPage),t.stopAudios()}}},{key:"turnPrev",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=this;if(this.currentPage<=this.gameConfig.levels.length-1&&(t.rightBtn.alpha=1,t.hideBoy(),t.pageturn.alpha=1),this.gameConfig.showCoverpage?0==this.currentPage&&(t.leftBtn.alpha=0,t.gameMenuBar.backBtnShow=!0,t.gameMenuBar.updateGameMenu()):1==this.currentPage&&(t.leftBtn.alpha=0,t.gameMenuBar.backBtnShow=!0,t.gameMenuBar.updateGameMenu()),this.currentPage<=0)this.isCoverPageTime_reserve&&this.gameConfig.showCoverpage&&(this.coverPageTl_reserve.tl.restart(),this.isCoverPageTime=!0,this.coverPageTl.coverPage.alpha=0,this.gameConfig.showCoverpage&&(t.gameMenuBar.backBtnShow=!1,t.gameMenuBar.updateGameMenu()));else if(!this.turnAnimating){this.turnAnimating=!0,this.currentPage--;var n=this.book.width-140;t.pageturn2.alpha=1,t.pageturn.alpha=0,t.pageturn.gotoAndStop(0),this.pageMaskUpper.x=250,p.TweenMax.to(this.pageturn2,0,{x:360,onStart:function(){t.pageturn2.alpha=1}}),p.TweenMax.to(this.pageturn2,e,{x:n,onComplete:function(){t.pageturn2.alpha=0,t.pageturn.alpha=1,t.pageturn.play()}}),p.TweenMax.to(t.pageMaskUpper,e,{x:n-50,onComplete:function(){t.pageMaskUpper.x=n-50+180,t.turnAnimating=!1,t.playAudios()}}),this.pageUpper.texture=PIXI.Texture.from(this.gameConfig.levels[this.currentPage].picture),this.pageDown.texture=PIXI.Texture.from(this.gameConfig.levels[this.currentPage+1].picture),t.vueInstance.$emit("changeGameLevel",t.currentPage),t.boyIsShownTimes=0,t.stopAudios()}}}]),t}(PIXI.Container)),Je=null,Ze=null,Qe={name:"module1",mixins:[I,C],data:function(){return{backShow:!1,homeShow:!0,currentGameLevel:0,showCongra:!1,popupType:"popup2",currentLessonCompleted:!1}},computed:d()({},Object(v.c)(["lessonPartsList","alreadyHasOneCard","showPopupDelay","allPartNames","assetsPages","assetsGameConfig","assetsResources","completedLessonNum","allLessonsNum","lessonPartsIndex","restArrangementStat","allLessonComponentsNames","energyCurrentNum","lessonCurrentPageIndex","gameHasBeenCompleted"])),components:{congraPopup:ve},methods:d()({},Object(v.b)(["SET_CANVASPAGE","SET_INDEXPAGEINITIALSLIDE","SET_COMPLETEDLESSONNUM","SET_ASSETSPAGES","SET_ASSETSRESOURCES","SET_ASSETSGAMECONFIG","PUSH_GAMES","SET_LESSONCOMPLETESTAT","SET_RESTARRANGEMENTSTAT","SET_LESSONCURRENTPAGEINDEX"]),{clickContinue:function(){this.gameHasBeenCompleted?b.call(this,!1):b.call(this,!0)},againClicked:function(){this.showCongra=!1,Je&&Je.gameTryAgain()},quitGame:function(){var e=this;setTimeout(function(){e.$router.push("/index/")},1e3),x.setMaskShow(!0);var t=this.$route.fullPath.split("/"),n=e.allPartNames.indexOf(t[2]);e.SET_INDEXPAGEINITIALSLIDE(Number(n))},continueGame:function(){this.showCongra=!1},gotoBack:function(){Je&&Je.goBackComing()},gameStart:function(e){var t=this;Ze=this.$route.meta.assetsUrl;function n(n,a){for(var i=[],s=0;s<a.gameData.levels.length;s++){var o=a.gameData.levels[s].audioSrc,r=Ze+"_"+o.replace(/\./g,"_");o&&""!=_.trim(o)&&i.push({id:r,src:o})}if(1==a.gameData.showCoverpage&&a.gameData.coverpageAudio&&""!=_.trim(a.gameData.coverpageAudio)&&i.push({id:Ze+"_"+a.gameData.coverpageAudio.replace(/\./g,"_"),src:a.gameData.coverpageAudio}),void 0==j.loadedStatus[Ze]&&i.length>0)j.addAudio(i,"static/"+Ze+"/",function(){var n=new Ve({json:a.gameData,vueInstance:t});e.stage.addChild(n),Je=n,x.setMaskShow(!1)},Ze);else{var u=new Ve({json:a.gameData,app:e,ticker:e.ticker,resources:n,vueInstance:t});e.stage.addChild(u),Je=u,x.setMaskShow(!1)}}x.setMaskShow(!0,0),t.axios.get("static/"+Ze+"/gameconfig.json").then(function(e){var a=e.data.assets.map(function(e,t){return{name:""+e.name,url:e.url}});T.call(t,Ze,a,n)})}}),beforeCreate:function(){0==this.$store.state.lessonPartsList.length&&(this.$router.push("/"),window.location.reload())},beforeDestroy:function(){Je&&(Je.destroyed(),Je.destroy(),Je=null)},mounted:function(){var e=this;e.SET_LESSONCURRENTPAGEINDEX(Number(e.allLessonComponentsNames.indexOf(e.$route.name))),this.$on("changeGameLevel",function(t){e.currentGameLevel=t}),this.$on("showCongra",function(){e.showCongra=!0})}},et={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"gameContainer"},[n("pixi-canvas",{on:{startGame:e.gameStart}}),e._v(" "),n("transition",{on:{"before-enter":e.beforeEnter,enter:e.enter,leave:e.leave}},[e.showCongra?n("congraPopup",{attrs:{showType:e.popupType},on:{quitGame:function(t){e.quitGame()},continueGame:function(t){e.continueGame()},continueClicked:function(t){e.clickContinue()},againClicked:e.againClicked}}):e._e()],1)],1)},staticRenderFns:[]};var tt=n("VU/8")(Qe,et,!1,function(e){n("jXi+")},"data-v-4a1b65cf",null).exports;a.a.use(o.a);var nt=new o.a({routes:[{path:"/",name:"boot",component:Q},{path:"/index/",name:"index",component:ne},{path:"/index/song",component:le,meta:{assetsUrl:"choiceinterface"},children:[{path:"/",name:"childs-song-0",component:re,meta:{assetsUrl:"choiceinterface"}},{path:"learning",name:"song-0-0",component:ye,meta:{assetsUrl:"moviemodule",completed:0}}]},{path:"/index/vocabulary",component:le,meta:{assetsUrl:"choiceinterface"},children:[{path:"/",name:"childs-vocabulary-1",component:re,meta:{assetsUrl:"choiceinterface"}},{path:"learning",name:"vocabulary-1-0",component:Me,meta:{assetsUrl:"picswipemodule",completed:0}},{path:"practice",name:"vocabulary-1-1",component:Ue,meta:{assetsUrl:"choicetextmodule",completed:0}}]},{path:"/index/sentences",component:le,meta:{assetsUrl:"choiceinterface"},children:[{path:"/",name:"childs-sentences-2",component:re,meta:{assetsUrl:"choiceinterface"}},{path:"learning",name:"sentences-2-0",component:Me,meta:{assetsUrl:"picswipemodule",completed:0}},{path:"practice",name:"sentences-2-1",component:Ke,meta:{assetsUrl:"choicepicmodule",completed:0}}]},{path:"/index/ketpet",component:le,meta:{assetsUrl:"choiceinterface"},children:[{path:"/",name:"childs-ketpet-3",component:re,meta:{assetsUrl:"choiceinterface"}},{path:"learning",name:"ketpet-3-0",component:tt,meta:{assetsUrl:"bookreadingmodule",completed:0}}]}]});a.a.use(v.a);var at=new v.a.Store({state:{canvasPages:[],appPlatform:"",currentPage:0,gamesArr:[],gamesPixiAssets:[],routeNames:[],gameThemeType:0,alreadyHasOneCard:!1,openMagicBookByGameIndex:!1,bookOpened:-1,showMagicBook:!1,indexPageInitialSlide:0,showPopupDelay:1200,gameInitResponse:null,energyCurrentNum:0,completedLessonNum:0,allLessonCompleteStat:[],allLessonComponentsNames:[],allLessonsNum:0,allPartNames:[],allGameCards:0,gameHasBeenCompleted:!1,lessonCurrentPageIndex:0,perLessonProgressArr:[],baseAssetsCompleted:!1,lessonPartsList:[],lessonChoiced:0,lessonPartsIndex:0,preparationJson:null,currentModuleList:[],modulesIndex:0,lessonCompletedList:[],restArrangementStat:[],loadingAlready:!1,assetsPages:{indexPage:null,choicePage:null},assetsResources:{indexPage:null,choicePage:null},assetsGameConfig:{}},getters:{},actions:{SET_MAGICBOOKBYGAMEINDEX:function(e,t){(0,e.commit)("setMagicBookByGameIndex",t)},SET_BOOKOPENED:function(e,t){(0,e.commit)("setBookOpened",t)},SET_ALREADYHASONECARD:function(e,t){(0,e.commit)("setAlreadyHasOneCard",t)},SET_GAMETHEMETYPE:function(e,t){(0,e.commit)("setGameThemeType",t)},SET_SHOWMAGICBOOK:function(e,t){(0,e.commit)("setShowMagicBook",t)},SET_INDEXPAGEINITIALSLIDE:function(e,t){(0,e.commit)("setIndexPageInitialSlide",t)},SET_GAMECARDS:function(e,t){(0,e.commit)("setGameCards",t)},SET_ALLASSETSPACKAGE:function(e,t){var n=e.commit;n("setAllAssetsPackage",t),n("setAllResourcesPackage",t),n("setAllGameConfigPackage",t)},SET_ASSETSGAMECONFIG:function(e,t){(0,e.commit)("setAssetsGameConfig",t)},SET_ASSETSRESOURCES:function(e,t){(0,e.commit)("setAssetsResources",t)},SET_ASSETSPAGES:function(e,t){(0,e.commit)("setAssetsPages",t)},SET_COMPLETEDLESSONNUM:function(e,t){(0,e.commit)("setCompletedLessonNum",t)},SET_ALLLESSONNUM:function(e,t){(0,e.commit)("setAllLessonNum",t)},SET_GAMEINITRESPONSE:function(e,t){(0,e.commit)("setGameInitResponse",t)},SET_ALLPARTNAMES:function(e,t){(0,e.commit)("setAllPartNames",t)},SET_GAMEHASBEENCOMPLETED:function(e,t){(0,e.commit)("setGameHasBeenCompleted",t)},SET_LESSONCURRENTPAGEINDEX:function(e,t){(0,e.commit)("setLessonCurrentPageIndex",t)},SET_ALLLESSONCOMPONENTSNAMES:function(e,t){(0,e.commit)("setAllLessonComponentNames",t)},SET_PERLESSONPROGRESS:function(e,t){(0,e.commit)("setPerLessonProgress",t)},SET_ENERGY:function(e,t){(0,e.commit)("setEnergy",t)},SET_RESTARRANGEMENTSTAT:function(e,t){(0,e.commit)("setRestArrangementStat",t)},SET_LESSONCOMPLETESTAT:function(e,t){(0,e.commit)("setLessonCompleteStat",t)},SET_LOADINGANIMATION_STAT:function(e,t){(0,e.commit)("setLoadingAnimationReady",t)},SET_PLATFORM:function(e,t){(0,e.commit)("setPlatform",t)},SET_MODULELIST:function(e,t){(0,e.commit)("setModuleList",t)},SET_MODULEINDEX:function(e,t){(0,e.commit)("setModuleIndex",t)},SET_LESSONPARTSLIST:function(e,t){(0,e.commit)("setLessonPartsList",t)},SET_LESSONPARTSINDEX:function(e,t){(0,e.commit)("setLessonPartsIndex",t)},SET_PREPARATION:function(e,t){(0,e.commit)("setPreparation",t)},PUSH_GAMES:function(e,t){(0,e.commit)("pushGames",t)},SET_CURRENTPAGE:function(e,t){(0,e.commit)("setCurrentPage",t)},SET_CANVASPAGE:function(e,t){(0,e.commit)("setCanvasPage",t)},SET_BASEASSETSCOMPLETE:function(e,t){(0,e.commit)("setBaseAssetsComplete",t)}},mutations:{setEnergy:function(e,t){e.energyCurrentNum=t},setBookOpened:function(e,t){e.bookOpened=t},setMagicBookByGameIndex:function(e,t){e.openMagicBookByGameIndex=t},setShowMagicBook:function(e,t){e.showMagicBook=t},setGameThemeType:function(e,t){e.gameThemeType=t},setAlreadyHasOneCard:function(e,t){e.alreadyHasOneCard=t},setIndexPageInitialSlide:function(e,t){e.indexPageInitialSlide=t},setAllAssetsPackage:function(e,t){t.forEach(function(t){e.assetsPages[t]=null})},setAllResourcesPackage:function(e,t){t.forEach(function(t){e.assetsResources[t]=null})},setAllGameConfigPackage:function(e,t){t.forEach(function(t){e.assetsGameConfig[t]=null})},setAssetsResources:function(e,t){e.assetsResources[t.resName]=t.resData},setAssetsPages:function(e,t){e.assetsPages[t.assetsName]=t.completedStat},setAssetsGameConfig:function(e,t){e.assetsGameConfig[t.name]=t.data},setGameCards:function(e,t){e.allGameCards=t},setAllLessonNum:function(e,t){e.allLessonsNum=t},setCompletedLessonNum:function(e,t){e.completedLessonNum=t},setGameInitResponse:function(e,t){e.gameInitResponse=t},setAllPartNames:function(e,t){e.allPartNames=t},setGameHasBeenCompleted:function(e,t){e.gameHasBeenCompleted=t},setLessonCurrentPageIndex:function(e,t){e.lessonCurrentPageIndex=t},setAllLessonComponentNames:function(e,t){e.allLessonComponentsNames=t},setRestArrangementStat:function(e,t){e.restArrangementStat=t},setPerLessonProgress:function(e,t){e.perLessonProgressArr=t},setLessonCompleteStat:function(e,t){e.allLessonCompleteStat=t},setLoadingAnimationReady:function(e,t){e.loadingAlready=t},setBaseAssetsComplete:function(e,t){e.baseAssetsCompleted=t},setLessonCompletedList:function(e,t){e.lessonCompletedList=t},setPlatform:function(e,t){e.appPlatform=t},setModuleIndex:function(e,t){e.modulesIndex=t},setModuleList:function(e,t){e.currentModuleList=t},setLessonPartsList:function(e,t){e.lessonPartsList=t},setLessonPartsIndex:function(e,t){e.lessonPartsIndex=t},setPreparation:function(e,t){e.preparationJson=t},pushGames:function(e,t){e.gamesArr.push(t)},setCurrentPage:function(e,t){e.currentPage=t},setCanvasPage:function(e,t){e.canvasPages[t]=!0}}}),it={install:function(e){e.component("pixiCanvas",{data:function(){return{myapp:null}},props:{screenW:{type:Number,default:1920},screenH:{type:Number,default:1080}},template:'<div class="pixiCanvas" ref="pixicanvas"></div>',mounted:function(){if(!this.app){PIXI.utils.skipHello(),this.app=new PIXI.Application({width:this.screenW,height:this.screenH,antialias:!1,transparent:!0}),this.app.renderer.autoResize=!0,this.app.view.style.position="absolute",this.app.view.style.width="100%",this.app.view.style.height="100%",this.app.view.style.top="0px",this.app.view.style.left="0px",this.app.view.style.right="0px",this.app.view.style.margin="0px auto",this.$refs.pixicanvas.appendChild(this.app.view),this.$emit("startGame",this.app)}},destroyed:function(){this.app&&(this.app.destroy(),this.app=null,delete this.app)}})}},st=it;n("M4fF");a.a.use(u.a,s.a),a.a.use(st),a.a.use(o.a),a.a.config.productionTip=!1,new a.a({el:"#app",router:nt,store:at,components:{App:N},template:"<App/>"})},UkJS:function(e,t){},dTuf:function(e,t){},eMZf:function(e,t){},f1Uu:function(e,t){},"jXi+":function(e,t){},l3xg:function(e,t){},nBsY:function(e,t){},u0Po:function(e,t){},v2ns:function(e,t){}},["NHnr"]);